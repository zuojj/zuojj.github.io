
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="煦涵驛">
    <title>归档: 2023/9 - 煦涵驛</title>
    <meta name="author" content="煦涵">
    
        <meta name="keywords" content="WEB开发,前端开发,用户体验">
    
    
        <link rel="icon" href="https://zuojj.com/assets/images/favicon.ico">
    
    
    <script type="application/ld+json">{}</script>
    <meta name="description" content="一介码农，尝试用代码改变世界，用智慧颠覆未来">
<meta property="og:type" content="blog">
<meta property="og:title" content="煦涵驛">
<meta property="og:url" content="https://zuojj.com/archives/2023/09/index.html">
<meta property="og:site_name" content="煦涵驛">
<meta property="og:description" content="一介码农，尝试用代码改变世界，用智慧颠覆未来">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="煦涵">
<meta property="article:tag" content="WEB开发">
<meta property="article:tag" content="前端开发">
<meta property="article:tag" content="用户体验">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;zuojj">
    
    
        
    
    
        <meta property="og:image" content="https://zuojj.com/assets/images/android-icon-192x192.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-athhlbkl2h9o0tjyweq8ul0h4utvjcbpwygudrdazywyt94bvtc6uxmypt2m.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159301267-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-159301267-1');
    </script>


    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            煦涵驛
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片" onerror="this.style.display='none'"/>
                </a>
                <h4 class="sidebar-profile-name">煦涵</h4>
                
                    <h5 class="sidebar-profile-bio"><p>因为热爱，所以坚持。</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/zuojj"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:zuojj.com@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="邮箱"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0908/%E6%8E%A8%E8%8D%90%E4%B8%80%E4%B8%AANode%20OpenAi%20api%E5%BA%93.html"
                            aria-label=": 2023/0908/推荐一个Node OpenAi api库"
                        >
                            2023/0908/推荐一个Node OpenAi api库
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>当谈到使用OpenAI API库时，有几个选择可以考虑。以下是我推荐的一个：</p>
<p><strong>node-openai</strong></p>
<p>node-openai是一个Node.js库，它提供了一个简单的方法来调用OpenAI GPT API。它使用HTTP请求与OpenAI API进行交互，并返回JSON格式的响应。这使得与OpenAI GPT API的交互变得更加容易和简单。</p>
<p>以下是一个使用node-openai的基本示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OpenAI = <span class="built_in">require</span>(<span class="string">'node-openai'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GPT = <span class="keyword">new</span> OpenAI(<span class="string">'YOUR_API_KEY'</span>);</span><br><span class="line"></span><br><span class="line">GPT.text(<span class="string">'hello world'</span>, (err, response) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，我们使用node-openai创建了一个新的API实例，并调用了<code>text</code>方法，传入了一个文本查询和一个回调函数。回调函数会在API响应时被执行，并可以处理响应数据。</p>
<p>与其他库相比，node-openai非常年轻，因此它可能不是最成熟或最稳定的选择。但是，如果您正在寻找一个简单并且易于使用的Node.js库来调用OpenAI GPT API，那么node-openai是一个不错的选择。</p>
<p>下面是一个demo代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OpenAI = <span class="built_in">require</span>(<span class="string">'node-openai'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> GPT = <span class="keyword">new</span> OpenAI(<span class="string">'YOUR_API_KEY'</span>);</span><br><span class="line"></span><br><span class="line">GPT.text(<span class="string">'hello world'</span>, (err, response) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在上面的代码中，我们使用node-openai创建了一个新的API实例，并调用了<code>text</code>方法，传入了一个文本查询和一个回调函数。回调函数会在API响应时被执行，并可以处理响应数据。</p>
<p>与其他库相比，node-openai非常年轻，因此它可能不是最成熟或最稳定的选择。但是，如果您正在寻找一个简单并且易于使用的Node.js库来调用OpenAI GPT API，那么node-openai是一个不错的选择。</p>
<h1 id="OpenAI-Node-API-Library"><a href="#OpenAI-Node-API-Library" class="headerlink" title="OpenAI Node API Library"></a>OpenAI Node API Library</h1><p><a href="https://npmjs.org/package/openai" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/v/openai.svg" alt="NPM version"></a></p>
<p>This library provides convenient access to the OpenAI REST API from TypeScript or JavaScript.</p>
<p>It is generated from our <a href="https://github.com/openai/openai-openapi" target="_blank" rel="noopener">OpenAPI specification</a> with <a href="https://stainlessapi.com/" target="_blank" rel="noopener">Stainless</a>.</p>
<p>To learn how to use the OpenAI API, check out our <a href="https://platform.openai.com/docs/api-reference" target="_blank" rel="noopener">API Reference</a> and <a href="https://platform.openai.com/docs" target="_blank" rel="noopener">Documentation</a>.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save openai</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">yarn add openai</span><br></pre></td></tr></table></figure>

<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>The full API of this library can be found in <a href="https://github.com/openai/openai-node/blob/master/api.md" target="_blank" rel="noopener">api.md file</a>. The code below shows how to get started using the chat completions API.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> OpenAI <span class="keyword">from</span> <span class="string">'openai'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI(&#123;</span><br><span class="line">  apiKey: <span class="string">'my api key'</span>, <span class="comment">// defaults to process.env["OPENAI_API_KEY"]</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> completion = <span class="keyword">await</span> openai.chat.completions.create(&#123;</span><br><span class="line">    messages: [&#123; <span class="attr">role</span>: <span class="string">'user'</span>, <span class="attr">content</span>: <span class="string">'Say this is a test'</span> &#125;],</span><br><span class="line">    model: <span class="string">'gpt-3.5-turbo'</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(completion.choices);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

<h2 id="Streaming-Responses"><a href="#Streaming-Responses" class="headerlink" title="Streaming Responses"></a>Streaming Responses</h2><p>We provide support for streaming responses using Server Sent Events (SSE).</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> OpenAI <span class="keyword">from</span> <span class="string">'openai'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI();</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> stream = <span class="keyword">await</span> openai.chat.completions.create(&#123;</span><br><span class="line">    model: <span class="string">'gpt-4'</span>,</span><br><span class="line">    messages: [&#123; role: <span class="string">'user'</span>, content: <span class="string">'Say this is a test'</span> &#125;],</span><br><span class="line">    stream: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> part of stream) &#123;</span><br><span class="line">    process.stdout.write(part.choices[<span class="number">0</span>]?.delta?.content || <span class="string">''</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

<p>If you need to cancel a stream, you can <code>break</code> from the loop<br>or call <code>stream.controller.abort()</code>.</p>
<h3 id="Request-amp-Response-types"><a href="#Request-amp-Response-types" class="headerlink" title="Request &amp; Response types"></a>Request &amp; Response types</h3><p>This library includes TypeScript definitions for all request params and response fields. You may import and use them like so:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> OpenAI <span class="keyword">from</span> <span class="string">'openai'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI(&#123;</span><br><span class="line">  apiKey: <span class="string">'my api key'</span>, <span class="comment">// defaults to process.env["OPENAI_API_KEY"]</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> params: OpenAI.Chat.ChatCompletionCreateParams = &#123;</span><br><span class="line">    messages: [&#123; role: <span class="string">'user'</span>, content: <span class="string">'Say this is a test'</span> &#125;],</span><br><span class="line">    model: <span class="string">'gpt-3.5-turbo'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> completion: OpenAI.Chat.ChatCompletion = <span class="keyword">await</span> openai.chat.completions.create(params);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

<p>Documentation for each method, request param, and response field are available in docstrings and will appear on hover in most modern editors.</p>
<blockquote>
<p>[!IMPORTANT]<br>Previous versions of this SDK used a <code>Configuration</code> class. See the <a href="https://github.com/openai/openai-node/discussions/217" target="_blank" rel="noopener">v3 to v4 migration guide</a>.</p>
</blockquote>
<h2 id="File-Uploads"><a href="#File-Uploads" class="headerlink" title="File Uploads"></a>File Uploads</h2><p>Request parameters that correspond to file uploads can be passed in many different forms:</p>
<ul>
<li><code>File</code> (or an object with the same structure)</li>
<li>a <code>fetch</code> <code>Response</code> (or an object with the same structure)</li>
<li>an <code>fs.ReadStream</code></li>
<li>the return value of our <code>toFile</code> helper</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">'fs'</span>;</span><br><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">'node-fetch'</span>;</span><br><span class="line"><span class="keyword">import</span> OpenAI, &#123; toFile &#125; <span class="keyword">from</span> <span class="string">'openai'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI();</span><br><span class="line"></span><br><span class="line"><span class="comment">// If you have access to Node `fs` we recommend using `fs.createReadStream()`:</span></span><br><span class="line"><span class="keyword">await</span> openai.files.create(&#123; file: fs.createReadStream(<span class="string">'input.jsonl'</span>), purpose: <span class="string">'fine-tune'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or if you have the web `File` API you can pass a `File` instance:</span></span><br><span class="line"><span class="keyword">await</span> openai.files.create(&#123; file: <span class="keyword">new</span> File([<span class="string">'my bytes'</span>], <span class="string">'input.jsonl'</span>), purpose: <span class="string">'fine-tune'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can also pass a `fetch` `Response`:</span></span><br><span class="line"><span class="keyword">await</span> openai.files.create(&#123; file: <span class="keyword">await</span> fetch(<span class="string">'https://somesite/input.jsonl'</span>), purpose: <span class="string">'fine-tune'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Finally, if none of the above are convenient, you can use our `toFile` helper:</span></span><br><span class="line"><span class="keyword">await</span> openai.files.create(&#123;</span><br><span class="line">  file: <span class="keyword">await</span> toFile(Buffer.from(<span class="string">'my bytes'</span>), <span class="string">'input.jsonl'</span>),</span><br><span class="line">  purpose: <span class="string">'fine-tune'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">await</span> openai.files.create(&#123;</span><br><span class="line">  file: <span class="keyword">await</span> toFile(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]), <span class="string">'input.jsonl'</span>),</span><br><span class="line">  purpose: <span class="string">'fine-tune'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Handling-errors"><a href="#Handling-errors" class="headerlink" title="Handling errors"></a>Handling errors</h2><p>When the library is unable to connect to the API,<br>or if the API returns a non-success status code (i.e., 4xx or 5xx response),<br>a subclass of <code>APIError</code> will be thrown:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> fineTune = <span class="keyword">await</span> openai.fineTunes</span><br><span class="line">    .create(&#123; training_file: <span class="string">'file-XGinujblHPwGLSztz8cPS8XY'</span> &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err <span class="keyword">instanceof</span> OpenAI.APIError) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err.status); <span class="comment">// 400</span></span><br><span class="line">        <span class="built_in">console</span>.log(err.name); <span class="comment">// BadRequestError</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(err.headers); <span class="comment">// &#123;server: 'nginx', ...&#125;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

<p>Error codes are as followed:</p>
<table>
<thead>
<tr>
<th>Status Code</th>
<th>Error Type</th>
</tr>
</thead>
<tbody><tr>
<td>400</td>
<td><code>BadRequestError</code></td>
</tr>
<tr>
<td>401</td>
<td><code>AuthenticationError</code></td>
</tr>
<tr>
<td>403</td>
<td><code>PermissionDeniedError</code></td>
</tr>
<tr>
<td>404</td>
<td><code>NotFoundError</code></td>
</tr>
<tr>
<td>422</td>
<td><code>UnprocessableEntityError</code></td>
</tr>
<tr>
<td>429</td>
<td><code>RateLimitError</code></td>
</tr>
<tr>
<td>&gt;=500</td>
<td><code>InternalServerError</code></td>
</tr>
<tr>
<td>N/A</td>
<td><code>APIConnectionError</code></td>
</tr>
</tbody></table>
<h3 id="Azure-OpenAI"><a href="#Azure-OpenAI" class="headerlink" title="Azure OpenAI"></a>Azure OpenAI</h3><p>An example of using this library with Azure OpenAI can be found <a href="https://github.com/openai/openai-node/blob/master/examples/azure.ts" target="_blank" rel="noopener">here</a>.</p>
<p>Please note there are subtle differences in API shape &amp; behavior between the Azure OpenAI API and the OpenAI API,<br>so using this library with Azure OpenAI may result in incorrect types, which can lead to bugs.</p>
<p>See <a href="https://www.npmjs.com/package/@azure/openai" target="_blank" rel="noopener"><code>@azure/openai</code></a> for an Azure-specific SDK provided by Microsoft.</p>
<h3 id="Retries"><a href="#Retries" class="headerlink" title="Retries"></a>Retries</h3><p>Certain errors will be automatically retried 2 times by default, with a short exponential backoff.<br>Connection errors (for example, due to a network connectivity problem), 409 Conflict, 429 Rate Limit,<br>and &gt;=500 Internal errors will all be retried by default.</p>
<p>You can use the <code>maxRetries</code> option to configure or disable this:</p>
<!-- prettier-ignore -->
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Configure the default for all requests:</span></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI(&#123;</span><br><span class="line">  maxRetries: <span class="number">0</span>, <span class="comment">// default is 2</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or, configure per-request:</span></span><br><span class="line"><span class="keyword">await</span> openai.chat.completions.create(&#123; <span class="attr">messages</span>: [&#123; <span class="attr">role</span>: <span class="string">'user'</span>, <span class="attr">content</span>: <span class="string">'How can I get the name of the current day in Node.js?'</span> &#125;], <span class="attr">model</span>: <span class="string">'gpt-3.5-turbo'</span> &#125;, &#123;</span><br><span class="line">  maxRetries: <span class="number">5</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Timeouts"><a href="#Timeouts" class="headerlink" title="Timeouts"></a>Timeouts</h3><p>Requests time out after 10 minutes by default. You can configure this with a <code>timeout</code> option:</p>
<!-- prettier-ignore -->
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Configure the default for all requests:</span></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI(&#123;</span><br><span class="line">  timeout: <span class="number">20</span> * <span class="number">1000</span>, <span class="comment">// 20 seconds (default is 10 minutes)</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Override per-request:</span></span><br><span class="line"><span class="keyword">await</span> openai.chat.completions.create(&#123; messages: [&#123; role: <span class="string">'user'</span>, content: <span class="string">'How can I list all files in a directory using Python?'</span> &#125;], model: <span class="string">'gpt-3.5-turbo'</span> &#125;, &#123;</span><br><span class="line">  timeout: <span class="number">5</span> * <span class="number">1000</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>On timeout, an <code>APIConnectionTimeoutError</code> is thrown.</p>
<p>Note that requests which time out will be <a href="#retries">retried twice by default</a>.</p>
<h2 id="Auto-pagination"><a href="#Auto-pagination" class="headerlink" title="Auto-pagination"></a>Auto-pagination</h2><p>List methods in the OpenAI API are paginated.<br>You can use <code>for await … of</code> syntax to iterate through items across all pages:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchAllFineTuningJobs</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> allFineTuningJobs = [];</span><br><span class="line">  <span class="comment">// Automatically fetches more pages as needed.</span></span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> job of openai.fineTuning.jobs.list(&#123; limit: <span class="number">20</span> &#125;)) &#123;</span><br><span class="line">    allFineTuningJobs.push(job);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> allFineTuningJobs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Alternatively, you can make request a single page at a time:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> page = <span class="keyword">await</span> openai.fineTuning.jobs.list(&#123; limit: <span class="number">20</span> &#125;);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> job of page.data) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(job);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Convenience methods are provided for manually paginating:</span></span><br><span class="line"><span class="keyword">while</span> (page.hasNextPage()) &#123;</span><br><span class="line">  page = page.getNextPage();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Advanced-Usage"><a href="#Advanced-Usage" class="headerlink" title="Advanced Usage"></a>Advanced Usage</h2><h3 id="Accessing-raw-Response-data-e-g-headers"><a href="#Accessing-raw-Response-data-e-g-headers" class="headerlink" title="Accessing raw Response data (e.g., headers)"></a>Accessing raw Response data (e.g., headers)</h3><p>The “raw” <code>Response</code> returned by <code>fetch()</code> can be accessed through the <code>.asResponse()</code> method on the <code>APIPromise</code> type that all methods return.</p>
<p>You can also use the <code>.withResponse()</code> method to get the raw <code>Response</code> along with the parsed data.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> openai.chat.completions</span><br><span class="line">  .create(&#123; messages: [&#123; role: <span class="string">'user'</span>, content: <span class="string">'Say this is a test'</span> &#125;], model: <span class="string">'gpt-3.5-turbo'</span> &#125;)</span><br><span class="line">  .asResponse();</span><br><span class="line"><span class="built_in">console</span>.log(response.headers.get(<span class="string">'X-My-Header'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(response.statusText); <span class="comment">// access the underlying Response object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; data: completions, response: raw &#125; = <span class="keyword">await</span> openai.chat.completions</span><br><span class="line">  .create(&#123; messages: [&#123; role: <span class="string">'user'</span>, content: <span class="string">'Say this is a test'</span> &#125;], model: <span class="string">'gpt-3.5-turbo'</span> &#125;)</span><br><span class="line">  .withResponse();</span><br><span class="line"><span class="built_in">console</span>.log(raw.headers.get(<span class="string">'X-My-Header'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(completions.choices);</span><br></pre></td></tr></table></figure>

<h2 id="Configuring-an-HTTP-S-Agent-e-g-for-proxies"><a href="#Configuring-an-HTTP-S-Agent-e-g-for-proxies" class="headerlink" title="Configuring an HTTP(S) Agent (e.g., for proxies)"></a>Configuring an HTTP(S) Agent (e.g., for proxies)</h2><p>By default, this library uses a stable agent for all http/https requests to reuse TCP connections, eliminating many TCP &amp; TLS handshakes and shaving around 100ms off most requests.</p>
<p>If you would like to disable or customize this behavior, for example to use the API behind a proxy, you can pass an <code>httpAgent</code> which is used for all requests (be they http or https), for example:</p>
<!-- prettier-ignore -->
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">'http'</span>;</span><br><span class="line"><span class="keyword">import</span> HttpsProxyAgent <span class="keyword">from</span> <span class="string">'https-proxy-agent'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure the default for all requests:</span></span><br><span class="line"><span class="keyword">const</span> openai = <span class="keyword">new</span> OpenAI(&#123;</span><br><span class="line">  httpAgent: <span class="keyword">new</span> HttpsProxyAgent(process.env.PROXY_URL),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Override per-request:</span></span><br><span class="line"><span class="keyword">await</span> openai.models.list(&#123;</span><br><span class="line">  baseURL: <span class="string">'http://localhost:8080/test-api'</span>,</span><br><span class="line">  httpAgent: <span class="keyword">new</span> http.Agent(&#123; keepAlive: <span class="literal">false</span> &#125;),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Semantic-Versioning"><a href="#Semantic-Versioning" class="headerlink" title="Semantic Versioning"></a>Semantic Versioning</h2><p>This package generally attempts to follow <a href="https://semver.org/spec/v2.0.0.html" target="_blank" rel="noopener">SemVer</a> conventions, though certain backwards-incompatible changes may be released as minor versions:</p>
<ol>
<li>Changes that only affect static types, without breaking runtime behavior.</li>
<li>Changes to library internals which are technically public but not intended or documented for external use. <em>(Please open a GitHub issue to let us know if you are relying on such internals)</em>.</li>
<li>Changes that we do not expect to impact the vast majority of users in practice.</li>
</ol>
<p>We take backwards-compatibility seriously and work hard to ensure you can rely on a smooth upgrade experience.</p>
<p>We are keen for your feedback; please open an <a href="https://www.github.com/openai/openai-node/issues" target="_blank" rel="noopener">issue</a> with questions, bugs, or suggestions.</p>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><p>TypeScript &gt;= 4.5 is supported.</p>
<p>The following runtimes are supported:</p>
<ul>
<li>Node.js 16 LTS or later (<a href="https://endoflife.date/nodejs" target="_blank" rel="noopener">non-EOL</a>) versions.</li>
<li>Deno v1.28.0 or higher, using <code>import OpenAI from &quot;npm:openai&quot;</code>.<br>Deno Deploy is not yet supported.</li>
<li>Cloudflare Workers.</li>
<li>Vercel Edge Runtime.</li>
</ul>
<p>If you are interested in other runtime environments, please open or upvote an issue on GitHub.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0908/%E6%8E%A8%E8%8D%90%E4%B8%80%E4%B8%AANode%20OpenAi%20api%E5%BA%93.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0906/index.html"
                            aria-label=": 2023/0906/index"
                        >
                            2023/0906/index
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    
const { NODE_ENV, SERVER_NAME } = process.env;
console.log(NODE_ENV, SERVER_NAME);
                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0906/index.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0906/%E6%96%B0%E7%89%88Node.js%E5%86%85%E7%BD%AE%E6%94%AF%E6%8C%81.env%E6%96%87%E4%BB%B6.html"
                            aria-label=": 2023/0906/新版Node.js内置支持.env文件"
                        >
                            2023/0906/新版Node.js内置支持.env文件
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="新版Node-js内置支持-env文件"><a href="#新版Node-js内置支持-env文件" class="headerlink" title="新版Node.js内置支持.env文件"></a>新版Node.js内置支持.env文件</h1><p>随着版本 v20.6.0 的发布，Node.js 现在内置了对.env文件的支持。现在，您可以完全无依赖地将环境变量从.env文件加载到Node.js 应用程序中。process.env 加载.env文件现在非常简单：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node --env-file .env</span><br></pre></td></tr></table></figure>

<h2 id="1-什么是-env-文件？"><a href="#1-什么是-env-文件？" class="headerlink" title="1.什么是.env 文件？"></a>1.什么是.env 文件？</h2><p>.env文件用于配置正在运行的应用程序中存在的环境变量。这个想法来自“The Twelve-Factor App”方法论，该方法论表示将在环境中的部署（例如开发、测试、生产）之间可能发生变化的所有内容存储起来。</p>
<p>配置不应成为应用程序代码的一部分，也不应签入版本控制。API 凭证或其他机密等内容应单独存储并加载到需要它们的环境中。文件.env可让您管理无法在环境中设置变量的应用程序的配置，例如开发计算机或CI。</p>
<p>许多不同语言的库都支持使用.env文件将变量加载到环境中，它们通常称为“dotenv”，Node.js常用的NPM包有 <code>cross-env</code>, <code>dotenv</code>.</p>
<h2 id="2-如何使用-env-文件？"><a href="#2-如何使用-env-文件？" class="headerlink" title="2.如何使用 .env 文件？"></a>2.如何使用 .env 文件？</h2><p>一个.env文件看起来长这样：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开发环境 .env.development</span></span><br><span class="line">NODE_ENV=development</span><br><span class="line">SECRET_KEY=rv3O62d1gu7s8vWpx</span><br></pre></td></tr></table></figure>

<p>通用我们会将.env文件放置到项目的根目录中，可以自定义文件命名，通过 <code>--env-file</code> 参数指定 .env 文件，待 Node.js 程序启动后，就可以从 <code>process.env</code> 中获取最新的环境变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ node --env-file .env.development  </span><br><span class="line">Welcome to Node.js v20.6.0.</span><br><span class="line">Type <span class="string">".help"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt; console.log(process.env.NODE_ENV,  process.env.SECRET_KEY)</span><br><span class="line">development rv3O62d1gu7s8vWpx</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-与-dotenv-对比"><a href="#3-与-dotenv-对比" class="headerlink" title="3.与 dotenv 对比"></a>3.与 dotenv 对比</h2><p>和dotenv相比，.env 文件支持的功能还相当基础。主要表现如下：</p>
<ul>
<li>您当前无法使用多行值</li>
<li>不能使用变量扩展</li>
<li>您一次只能指定一个文件。Node.js 将仅使用最后传递的 .env 文件，如下示例中，仅使用 .env.production 的变量：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node --env-file .env.development --env-file .env.production</span><br><span class="line">Welcome to Node.js v20.6.0.</span><br><span class="line">Type <span class="string">".help"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt; console.log(process.env.NODE_ENV,  process.env.SECRET_KEY)</span><br><span class="line">production grv3O62d1gu7s8vWpd</span><br></pre></td></tr></table></figure>

<ul>
<li>如果在环境和文件中定义了相同的变量，则环境中的值优先，Node.js 中 .env 的实现并非如此，而是会将环境中的覆盖掉。</li>
</ul>
<p>随着 Node.js 版本迭代，.env 文件的特性支持还有很多工作要完善，并且可能会添加其中一些功能。您可以点击左下角的“阅读原文”查看 Github 上更多讨论。</p>
<h2 id="4-Node-js-实现的优势"><a href="#4-Node-js-实现的优势" class="headerlink" title="4.Node.js 实现的优势"></a>4.Node.js 实现的优势</h2><p>尽管这种实现方式缺少一些功能，但与使用第三方软件包相比，它还是有一些优势。Node.js 会在启动时加载并解析 .env 文件，因此你可以在文件中加入配置 Node.js 本身的环境变量，如 NODE_OPTIONS。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_OPTIONS=<span class="string">"--no-warnings --inspect=127.0.0.1:9229"</span></span><br></pre></td></tr></table></figure>

<p>注意：为了避免死循环，不要在 NODE_OPTIONS=”–env-file .env.develpment” 配置你的 .env 文件。</p>
<h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5.总结"></a>5.总结</h2><p>大家可以积极去尝试 Node.js 20.6.0 版本带来的新功能，如稳定的测试运行器、模拟计时器和现在的 .env 文件支持，以及许多其他升级、修复和改进。20版本将于10月份成为 Node.js 的 LTS 版本，因此现在是测试这些新功能并开始考虑升级应用程序以利用这些新功能的好时机。</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0906/%E6%96%B0%E7%89%88Node.js%E5%86%85%E7%BD%AE%E6%94%AF%E6%8C%81.env%E6%96%87%E4%BB%B6.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0907/CSS%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9A%E5%8E%9F%E7%94%9FCSS%E5%B5%8C%E5%A5%97.html"
                            aria-label=": 2023/0907/CSS新特性：原生CSS嵌套"
                        >
                            2023/0907/CSS新特性：原生CSS嵌套
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="CSS新特性：原生CSS嵌套"><a href="#CSS新特性：原生CSS嵌套" class="headerlink" title="CSS新特性：原生CSS嵌套"></a>CSS新特性：原生CSS嵌套</h1><p>随着Firefox 117版本的发布，原生 CSS 嵌套（<strong>Native CSS nesting</strong>）已经被所有现代桌面浏览器所支持！🎉，但是请注意，移动端浏览器支持的还很有限。</p>
<p>配caniuse图</p>
<h2 id="1-原生-CSS-嵌套"><a href="#1-原生-CSS-嵌套" class="headerlink" title="1.原生 CSS 嵌套"></a>1.原生 CSS 嵌套</h2><p>原生 CSS 嵌套可以像 SASS、LESS 预处理器一样，将相关的选择器组合在一起，从而减少需要编写的规则数量，它可以节省打字时间，并使语法更易于阅读和维护。您可以将选择器嵌套到任意深度，但要小心不要超过两层或三层。嵌套深度没有技术限制，但它会使代码更难以阅读，并且生成的 CSS 可能会变得不必要的冗长。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">   <span class="attribute">background-color</span>: red;</span><br><span class="line"></span><br><span class="line">   &amp;.warning &#123;</span><br><span class="line">     <span class="selector-tag">background-color</span>: <span class="selector-tag">blue</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   &amp; <span class="selector-class">.icon</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1rem</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">1rem</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然原生 CSS 嵌套语法在过去几年中不断发展，使大多数 Web 开发人员感到满意，但不要指望所有 SCSS 代码都能像您期望的那样直接工作。</p>
<h2 id="2-原生-CSS-嵌套规则"><a href="#2-原生-CSS-嵌套规则" class="headerlink" title="2.原生 CSS 嵌套规则"></a>2.原生 CSS 嵌套规则</h2><p>您可以将任何选择器嵌套在另一个选择器中，但它必须以符号开头，例如 <code>&amp;</code>, <code>.</code>（类选择器）、<code>#</code>（ID选择器）、<code>@</code>（对于媒体查询）、<code>:</code>、<code>::</code>、<code>+</code>、 <code>~</code>、 <code>&gt;</code> 或 <code>[</code>。换句话说，它不能是对 HTML 元素的直接引用。下面的代码是无效的，不会对 <code>input</code> 元素选择器进行解析：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line"></span><br><span class="line">  input &#123;</span><br><span class="line">    <span class="selector-tag">margin</span>: 1<span class="selector-tag">em</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Invalid, because "input" is an identifier. */</span></span><br></pre></td></tr></table></figure>

<p>解决此问题的最简单方法是使用与号 ( &amp;)，它以与 Sass 相同的方式引用当前选择器。</p>
<h3 id="2-1-amp-符号的使用"><a href="#2-1-amp-符号的使用" class="headerlink" title="2.1.&amp; 符号的使用"></a>2.1.&amp; 符号的使用</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line"></span><br><span class="line">  &amp; input &#123;</span><br><span class="line">    <span class="selector-tag">margin</span>: 1<span class="selector-tag">em</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* use pseudo-elements and pseudo-classes */</span></span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:target</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* valid, no longer starts with an identifier */</span></span><br></pre></td></tr></table></figure>

<p>或者，您可以使用其中之一：</p>
<ul>
<li><p><code>&gt; input</code>：只对子元素生效</p>
</li>
<li><p><code>:is(input)</code>： 将选择器列表作为参数，并选择该列表中任意一个选择器可以选择的元素</p>
</li>
<li><p><code>:where(input)</code>：优先级总是为 0</p>
</li>
</ul>
<p>它们都可以在这个简单的示例中工作，但是稍后您可能会遇到更复杂的样式表的特异性问题。</p>
<p>它还&amp;允许您在父选择器上定位伪元素和伪类。例如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.my-element</span> &#123;</span><br><span class="line"></span><br><span class="line">  &amp;::after &#123;&#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-pseudo">:target</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>请注意，<code>&amp;</code> 可以在选择器中的任何位置使用。例如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.child1</span> &#123;</span><br><span class="line">  .parent3 &amp; &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">red</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这将转换为以下非嵌套语法：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent3</span> <span class="selector-class">.child1</span> &#123; <span class="attribute">color</span>: red; &#125;</span><br></pre></td></tr></table></figure>

<p>您甚至可以在选择器中使用多个 <code>&amp;</code> 符号：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  &amp; li &amp; &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">blue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这将以嵌套 <code>&lt;ul&gt;</code> 元素 ( ul li ul) 为目标，但如果您想保持理智，我建议不要使用它！</p>
<h3 id="2-2-符号的使用"><a href="#2-2-符号的使用" class="headerlink" title="2.2.@ 符号的使用"></a>2.2.@ 符号的使用</h3><p>嵌套媒体查询示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: cyan;</span><br><span class="line">  @media (min-width: 800px) &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">purple</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-原生-CSS-嵌套陷阱"><a href="#3-原生-CSS-嵌套陷阱" class="headerlink" title="3.原生 CSS 嵌套陷阱"></a>3.原生 CSS 嵌套陷阱</h2><h3 id="3-1-场景一：父选择器包装在-is-中"><a href="#3-1-场景一：父选择器包装在-is-中" class="headerlink" title="3.1.场景一：父选择器包装在 :is() 中"></a>3.1.场景一：父选择器包装在 <code>:is()</code> 中</h3><p>原生 CSS 嵌套将父选择器包装在 <code>:is()</code> 中，这可能会导致与 Sass 输出的差异，比如以下嵌套代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent1</span>, <span class="selector-id">#parent2</span> &#123;</span><br><span class="line">  .child1 &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当它在浏览器中解析时，它实际上变成以下内容：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:is(.parent1</span>, <span class="selector-id">#parent2</span>) <span class="selector-class">.child1</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Sass 将相同的代码编译为：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent1</span> <span class="selector-class">.child1</span>,</span><br><span class="line"><span class="selector-id">#parent2</span> <span class="selector-class">.child1</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-场景二：-amp-符号后置"><a href="#3-2-场景二：-amp-符号后置" class="headerlink" title="3.2.场景二：&amp; 符号后置"></a>3.2.场景二：&amp; 符号后置</h3><p>您可能还会遇到一个更微妙的问题。考虑一下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> <span class="selector-class">.child</span> &#123;</span><br><span class="line">  .grandparent &amp; &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原生 CSS 等效项是：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.grandparent</span> <span class="selector-pseudo">:is(.parent</span> <span class="selector-class">.child</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>这与以下错误排序的 HTML 元素匹配：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grandparent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child"</span>&gt;</span>MATCH<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MATCH变得有样式是因为 CSS 解析器执行以下操作：</p>
<p>它会查找所有元素，其所属类的child祖先也parent为DOM 层次结构中的任何点。</p>
<p>找到包含MATCH的元素后，解析器会grandparent在 DOM 层次结构中的任何位置再次检查它是否具有 — 的祖先。它找到一个并相应地设置该元素的样式。</p>
<p>Sass 中的情况并非如此，它编译为：</p>
<p>.grandparent .parent .child {}<br>上面的 HTML 没有样式化，因为元素类不遵循严格的grandparent、parent、 和child顺序。</p>
<h3 id="3-3-场景三：字符串替换"><a href="#3-3-场景三：字符串替换" class="headerlink" title="3.3.场景三：字符串替换"></a>3.3.场景三：字符串替换</h3><p>Sass 使用字符串替换，因此如下所示的声明是有效的，并且与类的任何元素相匹配 <code>.btn-primary</code>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  &amp;-primary &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">blue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是原生 CSS 嵌套会忽略&amp;-space选择器。</p>
<h2 id="4-CSS-预处理器还需要吗？"><a href="#4-CSS-预处理器还需要吗？" class="headerlink" title="4.CSS 预处理器还需要吗？"></a>4.CSS 预处理器还需要吗？</h2><p>从短期来看，现有的 CSS 预处理器仍然至关重要。Sass 开发团队宣布，他们将支持 .css 文件中的原生 CSS 嵌套，并按原样输出代码。他们将一如既往地编译嵌套 SCSS 代码，以避免破坏现有代码库，但当全球浏览器支持率达到 98% 时，他们将开始输出 :is() 选择器。</p>
<p>我猜想，PostCSS 插件等预处理器目前会扩展嵌套代码，但随着浏览器支持的普及，就会取消这一功能。当然，使用预处理器还有其他很好的理由，比如将部分代码捆绑到一个文件中，以及对代码进行精简。但如果嵌套是你唯一需要的功能，你当然可以考虑在较小的项目中使用原生 CSS。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>CSS 嵌套是最有用、最实用的预处理器功能之一。浏览器供应商努力创造了一个与 CSS 非常相似的原生 CSS 版本，以满足网络开发人员的需求。虽然两者之间存在细微差别，而且在使用（过于）复杂的选择器时可能会遇到不寻常的特殊性问题，但很少有代码库需要进行彻底修改。</p>
<p>原生嵌套可能会让你重新考虑是否需要 CSS 预处理器，但它们仍能提供其他好处。Sass 和类似工具仍然是大多数开发者工具包的重要组成部分。</p>
<p>要深入了解原生 CSS 嵌套，请点击左下角的“阅读原文”查看 W3C CSS 嵌套规范。</p>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h2>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0907/CSS%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9A%E5%8E%9F%E7%94%9FCSS%E5%B5%8C%E5%A5%97.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0904/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%9A%84VSCode%E6%8F%92%E4%BB%B6%E9%9B%86%E9%94%A6.html"
                            aria-label=": 2023/0904/研效提升：前端开发常用的VSCode插件集锦"
                        >
                            2023/0904/研效提升：前端开发常用的VSCode插件集锦
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    
                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0904/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%9A%84VSCode%E6%8F%92%E4%BB%B6%E9%9B%86%E9%94%A6.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0903/%E6%8E%A8%E8%8D%90%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%B8%B8%E6%9C%89%E8%B6%A3%E7%9A%84%E5%8A%A8%E7%94%BB%E5%BA%93.html"
                            aria-label=": 2023/0903/推荐一个非常有趣的动画库"
                        >
                            2023/0903/推荐一个非常有趣的动画库
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-基本介绍"><a href="#1-基本介绍" class="headerlink" title="1. 基本介绍"></a>1. 基本介绍</h2><p>AutoAnimate 是一个零配置的嵌入式动画实用程序，可为您的 Web 应用程序添加平滑的过渡。您可以将它与 React、Solid、Vue、Svelte 或任何其他 JavaScript 应用程序一起使用。<br>AutoAnimate 的目标是在不影响开发人员的实施时间或性能预算的情况下大幅改善应用程序的用户体验。</p>
<h2 id="2-和其他动画库的区别"><a href="#2-和其他动画库的区别" class="headerlink" title="2. 和其他动画库的区别"></a>2. 和其他动画库的区别</h2><p>之前的动画库基本都是开发者要在哪里加上动画，需要我们自己决定或者配置才行，而 AutoAnimate 可以帮助我们自动在整个应用添加合适的动画。<br>AutoAnimate 使用一行代码即可实现添加合适的动画，我们不需要在编写时列表组件时考虑到 AutoAnimate。</p>
<p>AutoAnimate 可以追溯应用到代码库中的任何标记，包括第 3 方代码 - 只需提供父 DOM 节点，然后让 AutoAnimate 完成剩下的工作。</p>
<h2 id="3-使用指南"><a href="#3-使用指南" class="headerlink" title="3. 使用指南"></a>3. 使用指南</h2><h3 id="3-1-安装"><a href="#3-1-安装" class="headerlink" title="3.1 安装"></a>3.1 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add @formkit/auto-animate </span><br><span class="line">or</span><br><span class="line">npm install @formkit/auto-animate</span><br></pre></td></tr></table></figure>

<h3 id="3-2-用法"><a href="#3-2-用法" class="headerlink" title="3.2 用法"></a>3.2 用法</h3><p>AutoAnimate 本质上是一个 autoAnimate 接受父元素的函数。自动动画将应用于父元素及其直接子元素。当发生以下三个事件之一时，会专门触发动画：</p>
<ul>
<li>一个子级被添加到 DOM 中。</li>
<li>DOM 中的子级被删除。</li>
<li>一个孩子在 DOM 中移动。</li>
</ul>
<h3 id="3-3-注意事项"><a href="#3-3-注意事项" class="headerlink" title="3.3 注意事项"></a>3.3 注意事项</h3><p>使用其他类型的过渡仍然可以。例如，如果您仅使用 CSS 进行样式更改（例如悬停效果），则可以使用标准 CSS 过渡来进行此类样式调整。</p>
<ul>
<li>autoAnimate仅当添加、删除或移动父元素（您传递给的元素）的直接子元素时，才会触发动画。</li>
<li>position: relative如果父元素是静态定位的，它会自动接收。编写样式时请记住这一点。</li>
<li>有时，Flexbox 布局不会立即调整其子布局的大小。具有属性的子级flex-grow: 1会在捕捉到其完整宽度之前等待周围的内容。AutoAnimate 在这些情况下效果不佳，但如果您为元素指定更明确的宽度，它应该会像魅力一样工作。</li>
</ul>
<h2 id="4-原理介绍"><a href="#4-原理介绍" class="headerlink" title="4. 原理介绍"></a>4. 原理介绍</h2><h3 id="4-1-IntersectionObserver"><a href="#4-1-IntersectionObserver" class="headerlink" title="4.1 IntersectionObserver"></a>4.1 IntersectionObserver</h3><p>异步观察目标元素与祖先元素或具有顶级文档的视口的相交的变化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observePosition</span>(<span class="params">el: Element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> oldObserver = intersections.get(el)</span><br><span class="line">  oldObserver?.disconnect()</span><br><span class="line">  <span class="keyword">let</span> rect = coords.get(el)</span><br><span class="line">  <span class="keyword">let</span> invocations = <span class="number">0</span></span><br><span class="line">  <span class="keyword">const</span> buffer = <span class="number">5</span></span><br><span class="line">  <span class="keyword">if</span> (!rect) &#123;</span><br><span class="line">    rect = getCoords(el)</span><br><span class="line">    coords.set(el, rect)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> &#123; offsetWidth, offsetHeight &#125; = root</span><br><span class="line">  <span class="keyword">const</span> rootMargins = [</span><br><span class="line">    rect.top - buffer,</span><br><span class="line">    offsetWidth - (rect.left + buffer + rect.width),</span><br><span class="line">    offsetHeight - (rect.top + buffer + rect.height),</span><br><span class="line">    rect.left - buffer,</span><br><span class="line">  ]</span><br><span class="line">  <span class="keyword">const</span> rootMargin = rootMargins</span><br><span class="line">    .map(<span class="function">(<span class="params">px</span>) =&gt;</span><span class="string">`<span class="subst">$&#123;<span class="number">-1</span> * <span class="built_in">Math</span>.floor(px)&#125;</span>px`</span>)</span><br><span class="line">    .join(<span class="string">" "</span>)</span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">    () =&gt; &#123;</span><br><span class="line">      ++invocations &gt; <span class="number">1</span> &amp;&amp; updatePos(el)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      root,</span><br><span class="line">      threshold: <span class="number">1</span>,</span><br><span class="line">      rootMargin,</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  observer.observe(el)</span><br><span class="line">  intersections.set(el, observer)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-MutationObserver"><a href="#4-2-MutationObserver" class="headerlink" title="4.2 MutationObserver"></a>4.2 MutationObserver</h3><p>监听DOM树的变化，比如增加、删除、移动等DOM操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElements</span>(<span class="params">mutations: MutationRecord[]</span>): <span class="title">Set</span>&lt;<span class="title">Element</span>&gt; | <span class="title">false</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> observedNodes = mutations.reduce(<span class="function">(<span class="params">nodes: Node[], mutation</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      ...nodes,</span><br><span class="line">      ...Array.from(mutation.addedNodes),</span><br><span class="line">      ...Array.from(mutation.removedNodes),</span><br><span class="line">    ]</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Short circuit if _only_ comment nodes are observed</span></span><br><span class="line">  <span class="keyword">const</span> onlyCommentNodesObserved = observedNodes.every(</span><br><span class="line">    (node) =&gt; node.nodeName === <span class="string">"#comment"</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (onlyCommentNodesObserved) returnfalse</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> mutations.reduce(<span class="function">(<span class="params">elements: <span class="built_in">Set</span>&lt;Element&gt; | <span class="literal">false</span>, mutation</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Short circuit if we find a purposefully deleted node.</span></span><br><span class="line">    <span class="keyword">if</span> (elements === <span class="literal">false</span>) returnfalse</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mutation.target <span class="keyword">instanceof</span> Element) &#123;</span><br><span class="line">      target(mutation.target)</span><br><span class="line">      <span class="keyword">if</span> (!elements.has(mutation.target)) &#123;</span><br><span class="line">        elements.add(mutation.target)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mutation.target.children.length; i++) &#123;</span><br><span class="line">          <span class="keyword">const</span> child = mutation.target.children.item(i)</span><br><span class="line">          <span class="keyword">if</span> (!child) <span class="keyword">continue</span></span><br><span class="line">          <span class="keyword">if</span> (DEL <span class="keyword">in</span> child) returnfalse</span><br><span class="line">          target(mutation.target, child)</span><br><span class="line">          elements.add(child)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (mutation.removedNodes.length) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mutation.removedNodes.length; i++) &#123;</span><br><span class="line">          <span class="keyword">const</span> child = mutation.removedNodes[i]</span><br><span class="line">          <span class="keyword">if</span> (DEL <span class="keyword">in</span> child) returnfalse</span><br><span class="line">          <span class="keyword">if</span> (child <span class="keyword">instanceof</span> Element) &#123;</span><br><span class="line">            elements.add(child)</span><br><span class="line">            target(mutation.target, child)</span><br><span class="line">            siblings.set(child, [</span><br><span class="line">              mutation.previousSibling,</span><br><span class="line">              mutation.nextSibling,</span><br><span class="line">            ])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> elements</span><br><span class="line">  &#125;, newSet&lt;Element&gt;())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-ResizeObserver"><a href="#4-3-ResizeObserver" class="headerlink" title="4.3 ResizeObserver"></a>4.3 ResizeObserver</h3><p>对 Element 的内容或边框或 SVGElement 的边框的尺寸的更改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (typeofwindow !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  root = <span class="built_in">document</span>.documentElement</span><br><span class="line">  mutations = <span class="keyword">new</span> MutationObserver(handleMutations)</span><br><span class="line">  resize = <span class="keyword">new</span> ResizeObserver(handleResizes)</span><br><span class="line">  resize.observe(root)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>感兴趣的同学可以点击左下角的“阅读原文”学习和使用。</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0903/%E6%8E%A8%E8%8D%90%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%B8%B8%E6%9C%89%E8%B6%A3%E7%9A%84%E5%8A%A8%E7%94%BB%E5%BA%93.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0905/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9A%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%A6%E7%AD%BE.html"
                            aria-label=": 2023/0905/研效提升：如何高效管理浏览器书签"
                        >
                            2023/0905/研效提升：如何高效管理浏览器书签
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="研效提升：如何高效管理浏览器书签"><a href="#研效提升：如何高效管理浏览器书签" class="headerlink" title="研效提升：如何高效管理浏览器书签"></a>研效提升：如何高效管理浏览器书签</h1><p>书签管理是提高在线工作效率和保持跟踪的重要方法。本文将为您提供一篇关于浏览器书签管理的指南，帮助您更好地管理您的书签。</p>
<h2 id="1-什么是书签管理？"><a href="#1-什么是书签管理？" class="headerlink" title="1.什么是书签管理？"></a>1.什么是书签管理？</h2><p>书签管理是指通过在浏览器中添加、编辑、组织和删除书签，以便更方便地访问您喜欢的网站、文档和页面。书签可以是网页链接、文本片段、图片或其他内容。书签是我们上网的导航，收藏数量的多少体现我们对互联网的任职，书签算得上是我们浏览器里最重要的资产，这也就是很多浏览器支持灵活管理书签功能的原因。</p>
<h2 id="2-为什么要进行书签管理？"><a href="#2-为什么要进行书签管理？" class="headerlink" title="2.为什么要进行书签管理？"></a>2.为什么要进行书签管理？</h2><p>进行书签管理有以下几点好处：</p>
<ol>
<li>提高效率：通过整理和分类书签，您可以更快速地找到所需的信息，提高工作效率。</li>
<li>便于访问：将书签添加到特定的文件夹或标签中，可以方便地访问您经常访问的网站，避免在浏览器历史记录中苦苦寻找。</li>
<li>保持跟踪：书签可以让您轻松地保存对特定主题或项目的关注，方便日后查看和跟进。</li>
</ol>
<h2 id="如何更好地管理书签？"><a href="#如何更好地管理书签？" class="headerlink" title="如何更好地管理书签？"></a>如何更好地管理书签？</h2><h3 id="书签的筛选"><a href="#书签的筛选" class="headerlink" title="书签的筛选"></a>书签的筛选</h3><p>首先，我们需要有一个基本的判断，什么类型的网页是有价值的，是值得我们保存的。从日常访问看，值得加入书签的网页一般有两个特性：</p>
<ol>
<li>打开频率高，即被经常访问的</li>
<li>失效价值大，即有长期价值的</li>
</ol>
<p>根据这两个特性，我们可以用“四象限法则”来分析判断：</p>
<ol>
<li>象限一：经常打开 + 长期有用</li>
</ol>
<p>经常打开和长期有用的标签，通常是网站的主页（尤其是基础工具或官方站点）或者专题活动页，这种类型的网页数量可控、标签的有效性可以保证，管理此种类型的标签压力会小很多。</p>
<ol start="2">
<li>象限二：经常打开 + 短期有用</li>
</ol>
<p>经常打开和短期有用的标签，我们通常会点击地址栏旁边的 <strong>星星</strong> ICON 或者使用 「<strong>Ctrl+D</strong>」快速保存网页至书签管理器，以便后续阅读和使用比较方便快捷。</p>
<ol start="3">
<li>象限三：偶尔打开 + 短期有用</li>
</ol>
<p>对于偶尔打开、短期有用的网页，我们可以利用浏览器的历史记录和模糊查询来查找，这种足够满足需求了。</p>
<p>配图历史记录</p>
<ol start="4">
<li>象限四：偶尔打开 + 长期有用</li>
</ol>
<p>如何一个项目需要很长时间才能完成，需要我们把相关网页、文档地址收藏起来。我们需要在书签管理器中建立一个文件夹，保存该项目的相关网页。这种方式对数量少的网页还好，如果网页多，收藏和维护也会很麻烦。</p>
<h3 id="书签的管理"><a href="#书签的管理" class="headerlink" title="书签的管理"></a>书签的管理</h3><ol>
<li>书签管理的常用方式：</li>
</ol>
<ul>
<li>使用文件夹：将书签进行分类，将不同主题的书签放入不同的文件夹中。例如，你可以创建一个名为“工作”的文件夹，用于存放与工作相关的书签。</li>
<li>给书签加注释：在添加书签时，输入一个简短的注释，描述该书签的重要性。这有助于你记住上次访问该页面的原因。</li>
<li>使用标签：对于经常访问的页面，可以使用标签来代替文件夹。例如，你可以创建一个名为“工作”的标签，用于存放与工作相关的书签。</li>
<li>利用收藏夹：将重要且经常访问的页面添加到收藏夹中。在收藏夹中，你可以对页面进行分类，将其与不同的标签或文件夹关联。</li>
<li>利用搜索功能：使用浏览器的搜索功能，通过关键词搜索书签。</li>
<li>定期清理：定期检查你的书签，删除不再需要或已过期的书签。</li>
<li>使用扩展程序：使用浏览器扩展程序，如“书签管理”或“书签+”等，帮助管理你的书签。这些扩展程序可以改善书签的显示方式，提供更好的组织方式以及更高级的标签和文件夹功能。</li>
</ul>
<ol start="2">
<li>书签管理之MECE原则</li>
</ol>
<p>MECE，是“Mutually Exclusive, Collectively Exhaustive” 英文首字母的缩写。中文的意思是“相互独立，完全穷尽”，它是《金字塔原理》一书提出的一个很重要的结构分类原则。当我们要将一个问题化整为零时，使用MECE原则意味着将问题细分为更明确的、没有重叠的子问题，同时确保所有相关问题都已经考虑在内。通俗的理解，就是MECE原则是保证在结构划分时不重复、不遗漏，从而让结构划分更加清晰。</p>
<p>不知道大家平时都是怎么整理自己浏览器书签的，因为最近AI比较火爆，各种工具和网站层出不穷，收藏的越来越多，于是下定决心要好好整理一下书签，以便提高检索和工作效率。我结合自身使用浏览器的习惯，将书签分为两个层级，层级太多也是累赘，造成记忆和查找困难。</p>
<p>第一层级我从场景出发，将网页按照使用场景进行分类，比如“学习”、“工作”、“生活”等大类，通过对场景的分类，可以更好地、下意识的检索。</p>
<p>配图</p>
<p>第二层级继续对场景进行细分，比如”生活“里面可以细分出旅行、观影、购物、社交等功能场景，这样只要有明确的需求一般都能在细分场景中找到对应的网页。</p>
<p>配图</p>
<ol start="3">
<li>书签管理的最佳实践</li>
</ol>
<ul>
<li>使用有意义的标题：为书签添加一个简洁、明确的标题，以便快速识别其内容。</li>
<li>分类和分组：将相似类型的书签分组到文件夹或标签中，以便更有效地管理和查找。</li>
<li>定期更新：定期检查您的书签，删除过时或不再需要的链接，以保持书签栏的整洁。</li>
<li>备份书签：在添加书签时，考虑将其备份到其他设备或云端，以防数据丢失。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>书签管理是一项简单但重要的任务，可以帮助您更快速地访问所需的信息，提高工作效率。通过遵循以上指南，您可以更好地管理您的浏览器书签，提高在线工作效率，并享受更愉快的浏览体验。</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0905/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9A%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E7%AE%A1%E7%90%86%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%A6%E7%AD%BE.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/post/2023/0902/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9ACSS%E5%8A%A8%E7%94%BB%E5%9C%A8%E7%BA%BF%E8%B0%83%E8%AF%95%E9%A2%84%E8%A7%88.html"
                            aria-label=": 2023/0902/研效提升：CSS动画在线调试预览"
                        >
                            2023/0902/研效提升：CSS动画在线调试预览
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2023-09-07T23:13:18+08:00">
	
		    9月 07, 2023
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-基本介绍"><a href="#1-基本介绍" class="headerlink" title="1.基本介绍"></a>1.基本介绍</h2><p>EpicEasing是一款做得挺精致的 Easing 动画生成调试预览工具，通过预设效果或自定义动画曲线，支持 Ease、Spring、Bounce 各类动画效果，完成后可以导出 CSS、SCSS、Objective-C 和 Swift 代码直接使用。</p>
<h2 id="2-具体实例"><a href="#2-具体实例" class="headerlink" title="2.具体实例"></a>2.具体实例</h2><p>生成一个宽度变化的贝塞尔曲线动画，动画类型为Ease，BIZER类型为IN OUT，样式为Quart。导出的CSS/SCSS代码如下：</p>
<h3 id="2-1-CSS代码"><a href="#2-1-CSS代码" class="headerlink" title="2.1.CSS代码"></a>2.1.CSS代码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-transition-timing-function</span>: <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"><span class="selector-tag">-moz-transition-timing-function</span>: <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"><span class="selector-tag">-o-transition-timing-function</span>: <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"><span class="selector-tag">transition-timing-function</span>: <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">-webkit-transition</span>: <span class="selector-tag">all</span> 500<span class="selector-tag">ms</span> <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"><span class="selector-tag">-moz-transition</span>: <span class="selector-tag">all</span> 500<span class="selector-tag">ms</span> <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"><span class="selector-tag">-o-transition</span>: <span class="selector-tag">all</span> 500<span class="selector-tag">ms</span> <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br><span class="line"><span class="selector-tag">transition</span>: <span class="selector-tag">all</span> 500<span class="selector-tag">ms</span> <span class="selector-tag">cubic-bezier</span>(0<span class="selector-class">.770</span>, 0<span class="selector-class">.000</span>, 0<span class="selector-class">.175</span>, 1<span class="selector-class">.000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-2-SCSS代码"><a href="#2-2-SCSS代码" class="headerlink" title="2.2.SCSS代码"></a>2.2.SCSS代码</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ease-in-out-quart</span>: cubic-bezier(<span class="number">0.770</span>, <span class="number">0.000</span>, <span class="number">0.175</span>, <span class="number">1.000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">@mixin</span> trans-easing(<span class="variable">$easing</span>: <span class="variable">$ease-in-out-quart</span>) &#123;</span><br><span class="line">  <span class="attribute">transition-timing-function</span>: <span class="variable">$easing</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@mixin</span> anim-easing(<span class="variable">$easing</span>: <span class="variable">$ease-in-out-quart</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-timing-function</span>: <span class="variable">$easing</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-Swift代码"><a href="#2-3-Swift代码" class="headerlink" title="2.3.Swift代码"></a>2.3.Swift代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Customize Your Values Here:</span><br><span class="line">let keypath &#x3D; &quot;transform.translation.x&quot;</span><br><span class="line">let fromValue &#x3D; 0</span><br><span class="line">let toValue &#x3D; 150</span><br><span class="line">let duration &#x3D; 1.5</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Animation - In Out Quart Easing (made with epiceasing.com)</span><br><span class="line">let timingFunction &#x3D; CAMediaTimingFunction(controlPoints: 0.770, 0.000, 0.175, 1.000)</span><br><span class="line">let animation &#x3D; CABasicAnimation(keyPath: keypath)</span><br><span class="line">animation.duration &#x3D; duration</span><br><span class="line">animation.timingFunction &#x3D; timingFunction</span><br><span class="line">animation.fromValue &#x3D; fromValue</span><br><span class="line">animation.toValue &#x3D; toValue</span><br><span class="line">myLayer.add(animation, forKey: &quot;myEpicEasingAnimation&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="2-4-Object-C代码"><a href="#2-4-Object-C代码" class="headerlink" title="2.4.Object-C代码"></a>2.4.Object-C代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CAMediaTimingFunction *timing &#x3D; [[CAMediaTimingFunction alloc] initWithControlPoints:0.770 :0.000 :0.175 :1.000];</span><br><span class="line">      CABasicAnimation *animation &#x3D; [CABasicAnimation animationWithKeyPath:@&quot;transform.translation.y&quot;];</span><br><span class="line">      animation.timingFunction &#x3D; timing;</span><br><span class="line">      animation.duration &#x3D; 1.5;</span><br><span class="line">      animation.toValue &#x3D; [NSNumber numberWithFloat:100];</span><br><span class="line">      [epicView.layer addAnimation:animation forKey:@&quot;epic-easing-ease-quart&quot;];</span><br></pre></td></tr></table></figure>






                    
                        


                    
                    
                        <p>
                            <a
                                href="/post/2023/0902/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9ACSS%E5%8A%A8%E7%94%BB%E5%9C%A8%E7%BA%BF%E8%B0%83%E8%AF%95%E9%A2%84%E8%A7%88.html#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                评论和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 页 共 1 页</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 煦涵. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片" onerror="this.style.display='none'"/>
        
            <h4 id="about-card-name">煦涵</h4>
        
            <div id="about-card-bio"><p>因为热爱，所以坚持。</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Beijing
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover01.jpeg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-ah8fu2oihbm9frbz1pxa0jkqer1zb0klgkgmuaenrh4k2naxqcwf4av0zlc2.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
