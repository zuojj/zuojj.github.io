
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="煦涵驛">
    <title>文件上传那些事儿 - 煦涵驛</title>
    <meta name="author" content="煦涵">
    
        <meta name="keywords" content="WEB开发,前端开发,用户体验">
    
    
        <link rel="icon" href="https://zuojj.com/assets/images/favicon.ico">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"煦涵","sameAs":["https://github.com/zuojj","mailto:zuojj.com@gmail.com"],"image":"android-icon-192x192.png"},"articleBody":"今日头条：20150601”东方之星“客轮湖北监利沉船，可能是中国有史以来的最大的沉船事故。\n最近 M 端项目中涉及到图片上传功能，现把项目中遇到的一些问题及解决办法分享如下，与各位共同探讨：\n一、相关需求：\n客户端上限 10M\n服务器端上限 2M\n文件过滤\n显示上传进度\n异步上传\n多文件上传\n\n二、需求分析：\n实现 2，可使用 canvas 在前端实现压缩(base64)；\n实现 1、3，可采用 file.size 及/image/.test(file.type)过滤；\n实现 4，使用 XHR2 实现上传，添加进度时间监控，xhr.upload.addEventListener(“progress”, uploadProgress, false)；\n实现 5，使用 XHR2 实现上传；\n多文件上传，单文件循环上传即可，但是兼容进度时，需单文件各自监控；\n\n三、需求实现：实现一：二进制方式上传需求 1、3、4、5、6 皆可实现，但是服务器端上传 2M，使用 canvas 方式压缩后生成的是 base64，若使用此方式上传，必须把 base64 转换成二进制流，GitHub 上也有相关文章把 base64 转换成二进制流的，使用 xhr.sendAsBinary（）发送二进制流，参考此文，测了一部分常见机型，可以实现，具体是否可以在项目中使用还有待论证。二进制上传实现部分代码仅供参考：\n123456789101112131415161718192021222324252627282930313233343536373839404142var uploadFile = function(fileid, file) &#123;  var xhr = new XMLHttpRequest(),    fd = new FormData(),    url = \"/picture/upload\",    // 上传进度    uploadProgress = function(evt) &#123;      if (evt.lengthComputable) &#123;        var percent = (evt.loaded * 100 / evt.total).toFixed(1);        // show percent      &#125; else &#123;        console.log(\"unable to compute\");      &#125;    &#125;,    uploadFailed = function(evt) &#123;      // 上传失败    &#125;,    uploadCanceled = function(evt) &#123;      // 取消上传或网络连接断开！    &#125;;  xhr.upload.addEventListener(\"progress\", uploadProgress, false);  xhr.addEventListener(\"error\", uploadFailed, false);  xhr.addEventListener(\"abort\", uploadCanceled, false);  xhr.open(\"POST\", url, true);  xhr.onreadystatechange = function(e) &#123;    if (xhr.readyState == 4) &#123;      if (xhr.status === 200) &#123;        var data = xhr.response;        if (data != 0) &#123;          // 上传失败        &#125; else &#123;          // 上传成功        &#125;      &#125; else &#123;        // 上传失败      &#125;    &#125;  &#125;;  fd.append(fileid, file);  xhr.send(fd);&#125;;\n\n实现二：base64 上传需求 1、2、3、5、6 皆可实现，实现此种方式即基本的 Get 上传，但是无法实时监控上传文件进度，需求 4 无法实现。\n实现三：二进制+base64即上述两种方案的综合。也可参考此文移动端 Web 上传图片实践中的实例。\n四、问题总结：M 端浏览器各异，支持情况各异，现总结如下：a) 部分酷派机型浏览器（微信、UC、QQ、百度）,中兴自带浏览器不支持 input[type=file]；解决方式：放弃\nb) Adroid 机型，不同浏览器对 input[type=file]支持不同，有的没有图库选项，有的没有相机选项。主要表现为小米、酷派部分机型的微信自带浏览器。解决方式：input[type=file]添加 accept=’image/*‘属性，可实现某些 adriod 机型不出现文档选项。\nc) 上传文件时，出现图片自动旋转的问题解决方式：实现开源插件 CanvasResize 中 exif.js 来纠正，实现此插件可解决压缩、纠正图片旋转，但 Adroid 上 UC 浏览器中会出现下图问题：（国外人写的插件哪会管国内浏览器死活！）最后采用的腾讯的一款压缩方案，解决了 UC 浏览器的问题。\nd) 使用压缩插件时需注意，PNG 图片压缩时往往会偏大，可把压缩成 image/jpeg 格式；\n123var cvs = document.createElement(\"canvas\");var ctx = cvs.getContext(\"2d\").drawImage(source_img_obj, 0, 0);var newImageData = cvs.toDataURL(\"image/jpeg\", quality / 100);\n\nf) 因浏览器对 input[type=file]显示风格各异，项目使用 label 的 for 指向 input[type=file]的 id，并设置 input{display:none};在 Adroid 部分浏览器上点击无反应；解决方式：设置 input{position: absolute; top: -999em;} 来隐藏。\n\n#20150923 update start\n使用label标签for属性触发input[type=file]需要注意的一些问题：\n\n\nlabel 的 for 指向的是 input[text/radio/checkbox/date]等元素 trigger 的是 focus 事件，而指向 input[file]元素 trigger 的是 click 事件，因此可以打开一个浏览器窗口，这就是我们使用 label 的 for 指向 input[file],使用 zepto 的 tap 事件绑定时，不会触发的原因。\n给 input[type=file]设置 display: none or visibility: hidden 将不会工作，因为表单提交时 input 的值不会被发送到服务端。除上面解决的 top:-999em;也可以使用以下 CSS 来设置隐藏：input[type=file] {\n    width: 0.1px;\n    height: 0.1px;\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    z-index: -1;\n}\n你可能会有疑问，这里为什么不把宽高设置为 0 而为 0.1px。设置为 0 在一些浏览器 tab 页可能不会被解析。同时设置 position：absolute 属性来使其脱离标准流，不会影响其他元素的布局。\n\n如是想，使用 label 标签的 for 属性，我们就可以使用 CSS3 各种属性来 DIY 按钮各种样式及效果了，不是吗？\n同时可以设置当 input[file]focus 时，label 的 outline 样式：\n1234.input[type=file]:focus + label &#123;    outline: 1px dotted #000;    outline: -webkit-focus-ring-color auto 5px;&#125;\n\nFirefox 中对:hover,:active 支持良好，当时会忽略 input[type=”file”]:focus 设置，但是 Firefox 对 input[file]支持 focus、blur 事件，我们可以通过 JS 来增加和删除类 has-focus 来实现：\n1234567input.addEventListener( 'focus', function()&#123; input.classList.add( 'has-focus' ); &#125;);input.addEventListener( 'blur', function()&#123; input.classList.remove( 'has-focus' ); &#125;);.inputfile:focus + label,.inputfile.has-focus + label &#123;    outline: 1px dotted #000;    outline: -webkit-focus-ring-color auto 5px;&#125;\n\ninput[file]多选（multiple），现在多选在移动端和PC端支持都不太好，PC端IE9及以下浏览器不支持该属性；移动端andriod系统某些自带浏览器、UC浏览器支持情况各异。#20150923 update endg) 在部分Adroid支持input[type=file]的浏览器中，当使用/image/.test(file.type)时，选择图片文件会返回false。使用JSON.stringify(file)分析后发现，是file对象中的name字段中没有包含后缀，同时type字段为空，使用this.value获取路径中也没有包含后缀。因此过滤出现问题。如下结果：12&#123;\"webkitRelativePath\":\"\",\"lastModified\":1433304214000,\"lastModifiedDate\":\"2015-06-03T04:03:34.000Z\",\"name\":\"fanmian\",\"type\":\"\",\"size\":2273852&#125;\n正常结果如下：12&#123;\"webkitRelativePath\":\"\",\"lastModified\":1433304214000,\"lastModifiedDate\":\"2015-06-03T04:03:34.000Z\",\"name\":\"fanmian.png\",\"type\":\"image/png\",\"size\":2273852&#125;\n 解决方式：放开/image/.test(file.type)过滤，在压缩时，抛出错误过滤。\n\nh) html5上传文件，Firefox支持重复选择同一文件，其它浏览器不支持解决方式：每次选择文件后给input[type=file]赋值空。\n2015-09-09补充\ninput[type=file]控件比较特殊：\n对于ios，已实现file，ios7版本之前，可以唤起照片集里的图片文件；ios7后，实现了拍照和录像的功能。不过在7.0.3里有bug，程序会闪退；\n\n对于andriod，如果使用的是浏览器，file类型的文件选择，会唤起浏览器实现的文件选择，不过文件的选择，不同的手机，具体实现不同，web无法控制。如果在android app里使用webkit的方式，需要android的webkit实现私有api接口，才能实现file选择上传。\n五、移动端 input[type=file]浏览器兼容列表\ninput[type=file]控件在M端浏览器支持情况(部分机型)  by qianqian and xiaocui of my team updated at 2015.12.12\n\n\n\n\n编号\n手机设备\n测试浏览器\n是否支持拍照\n是否支持从相册选择\n\n\n1\niphone4S\n微信浏览器\n支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n2\niphone5S\n微信浏览器\n支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n3\niphone6\n微信浏览器\n支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n4\niphone6 plus\n微信浏览器\n支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n5\n小米手机2S\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n6\n小米手机M4\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n7\n三星S6 ED\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n8\n三星SM-G5308W\n微信浏览器\n不支持\n不支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n9\n华为荣耀7\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n10\n华为P7\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n不支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n11\n华为PE-TL10\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n支持\n支持\n\n\n12\n酷派8675-A\n微信浏览器\n不支持\n支持\n\n\nQQ浏览器\n不支持\n支持\n\n\nUC浏览器\n支持\n支持\n\n\n手机自带浏览器\n不支持\n不支持\n\n\n\n\n六、参考链接：Html5 File Upload with Progress移动端Web上传图片实践图片压缩成base64,采用二进流上传Styling &amp; Customizing File Inputs the Smart Way\n","dateCreated":"2015-06-02T23:46:23+08:00","dateModified":"2023-10-21T21:40:11+08:00","datePublished":"2015-06-02T23:46:23+08:00","description":"最近 M 端项目中涉及到图片上传功能，现把项目中遇到的一些问题及解决办法分享如下，与各位共同探讨","headline":"文件上传那些事儿","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://zuojj.com/post/talking_about_file_upload.html"},"publisher":{"@type":"Organization","name":"煦涵","sameAs":["https://github.com/zuojj","mailto:zuojj.com@gmail.com"],"image":"android-icon-192x192.png","logo":{"@type":"ImageObject","url":"android-icon-192x192.png"}},"url":"https://zuojj.com/post/talking_about_file_upload.html","keywords":"web"}</script>
    <meta name="description" content="最近 M 端项目中涉及到图片上传功能，现把项目中遇到的一些问题及解决办法分享如下，与各位共同探讨">
<meta property="og:type" content="blog">
<meta property="og:title" content="文件上传那些事儿">
<meta property="og:url" content="https://zuojj.com/post/talking_about_file_upload.html">
<meta property="og:site_name" content="煦涵驛">
<meta property="og:description" content="最近 M 端项目中涉及到图片上传功能，现把项目中遇到的一些问题及解决办法分享如下，与各位共同探讨">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.zuojj.com/wp-content/uploads/2015/06/uc-bug.png">
<meta property="article:published_time" content="2015-06-02T15:46:23.000Z">
<meta property="article:modified_time" content="2023-10-21T13:40:11.277Z">
<meta property="article:author" content="煦涵">
<meta property="article:tag" content="web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.zuojj.com/wp-content/uploads/2015/06/uc-bug.png">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;zuojj">
    
    
        
    
    
        <meta property="og:image" content="https://zuojj.com/assets/images/android-icon-192x192.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-lqtibpfrafjrgdfms3odizaq6d14jyapt8ay5e8um5m5nrltoik08iqdqzzy.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159301267-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-159301267-1');
    </script>


    

    
        
            
<link rel="stylesheet" href="/assets/css/gitalk.css">

        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            煦涵驛
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片" onerror="this.style.display='none'"/>
                </a>
                <h4 class="sidebar-profile-name">煦涵</h4>
                
                    <h5 class="sidebar-profile-bio"><p>因为热爱，所以坚持。</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/zuojj"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:zuojj.com@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="邮箱"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            文件上传那些事儿
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-06-02T23:46:23+08:00">
	
		    6月 02, 2015
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/Web%E5%BC%80%E5%8F%91/">Web开发</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p><strong><em>今日头条：20150601”东方之星“客轮湖北监利沉船，可能是中国有史以来的最大的沉船事故。</em></strong></p>
<p>最近 M 端项目中涉及到图片上传功能，现把项目中遇到的一些问题及解决办法分享如下，与各位共同探讨：</p>
<h2 id="一、相关需求："><a href="#一、相关需求：" class="headerlink" title="一、相关需求："></a>一、相关需求：</h2><ol>
<li>客户端上限 10M</li>
<li>服务器端上限 2M</li>
<li>文件过滤</li>
<li>显示上传进度</li>
<li>异步上传</li>
<li>多文件上传</li>
</ol>
<h2 id="二、需求分析："><a href="#二、需求分析：" class="headerlink" title="二、需求分析："></a>二、需求分析：</h2><ul>
<li>实现 2，可使用 canvas 在前端实现压缩(base64)；</li>
<li>实现 1、3，可采用 file.size 及/image/.test(file.type)过滤；</li>
<li>实现 4，使用 XHR2 实现上传，添加进度时间监控，xhr.upload.addEventListener(“progress”, uploadProgress, false)；</li>
<li>实现 5，使用 XHR2 实现上传；</li>
<li>多文件上传，单文件循环上传即可，但是兼容进度时，需单文件各自监控；</li>
</ul>
<h2 id="三、需求实现："><a href="#三、需求实现：" class="headerlink" title="三、需求实现："></a>三、需求实现：</h2><h3 id="实现一：二进制方式上传"><a href="#实现一：二进制方式上传" class="headerlink" title="实现一：二进制方式上传"></a>实现一：二进制方式上传</h3><p>需求 1、3、4、5、6 皆可实现，但是服务器端上传 2M，使用 canvas 方式压缩后生成的是 base64，若使用此方式上传，必须把 base64 转换成二进制流，GitHub 上也有相关文章把 base64 转换成二进制流的，使用 xhr.sendAsBinary（）发送二进制流，<a href="https://github.com/brunobar79/J-I-C/blob/master/src/JIC.js" target="_blank" rel="noopener">参考此文</a>，测了一部分常见机型，可以实现，具体是否可以在项目中使用还有待论证。二进制上传实现部分代码仅供参考：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uploadFile = <span class="function"><span class="keyword">function</span>(<span class="params">fileid, file</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest(),</span><br><span class="line">    fd = <span class="keyword">new</span> FormData(),</span><br><span class="line">    url = <span class="string">"/picture/upload"</span>,</span><br><span class="line">    <span class="comment">// 上传进度</span></span><br><span class="line">    uploadProgress = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (evt.lengthComputable) &#123;</span><br><span class="line">        <span class="keyword">var</span> percent = (evt.loaded * <span class="number">100</span> / evt.total).toFixed(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// show percent</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"unable to compute"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    uploadFailed = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 上传失败</span></span><br><span class="line">    &#125;,</span><br><span class="line">    uploadCanceled = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 取消上传或网络连接断开！</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">  xhr.upload.addEventListener(<span class="string">"progress"</span>, uploadProgress, <span class="literal">false</span>);</span><br><span class="line">  xhr.addEventListener(<span class="string">"error"</span>, uploadFailed, <span class="literal">false</span>);</span><br><span class="line">  xhr.addEventListener(<span class="string">"abort"</span>, uploadCanceled, <span class="literal">false</span>);</span><br><span class="line">  xhr.open(<span class="string">"POST"</span>, url, <span class="literal">true</span>);</span><br><span class="line">  xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> data = xhr.response;</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="comment">// 上传失败</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 上传成功</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 上传失败</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  fd.append(fileid, file);</span><br><span class="line">  xhr.send(fd);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="实现二：base64-上传"><a href="#实现二：base64-上传" class="headerlink" title="实现二：base64 上传"></a>实现二：base64 上传</h3><p>需求 1、2、3、5、6 皆可实现，实现此种方式即基本的 Get 上传，但是无法实时监控上传文件进度，需求 4 无法实现。</p>
<h3 id="实现三：二进制-base64"><a href="#实现三：二进制-base64" class="headerlink" title="实现三：二进制+base64"></a>实现三：二进制+base64</h3><p>即上述两种方案的综合。也可参考此文<a href="https://github.com/xiangpaopao/blog/issues/7" target="_blank" rel="noopener">移动端 Web 上传图片实践</a>中的实例。</p>
<h2 id="四、问题总结："><a href="#四、问题总结：" class="headerlink" title="四、问题总结："></a>四、问题总结：</h2><p>M 端浏览器各异，支持情况各异，现总结如下：<br>a) 部分酷派机型浏览器（微信、UC、QQ、百度）,中兴自带浏览器不支持 input[type=file]；<br><strong>解决方式：</strong>放弃</p>
<p>b) Adroid 机型，不同浏览器对 input[type=file]支持不同，有的没有图库选项，有的没有相机选项。主要表现为小米、酷派部分机型的微信自带浏览器。<br><strong>解决方式：</strong>input[type=file]添加 accept=’image/*‘属性，可实现某些 adriod 机型不出现文档选项。</p>
<p>c) 上传文件时，出现图片自动旋转的问题<br><strong>解决方式：</strong>实现开源插件 CanvasResize 中 exif.js 来纠正，实现此插件可解决压缩、纠正图片旋转，但 Adroid 上 UC 浏览器中会出现下图问题：（国外人写的插件哪会管国内浏览器死活！）<br><a href="http://www.zuojj.com/wp-content/uploads/2015/06/uc-bug.png" target="_blank" rel="noopener"><img class="aligncenter size-full wp-image-1460" src="http://www.zuojj.com/wp-content/uploads/2015/06/uc-bug.png" alt="uc-bug" width="227" height="322" /></a><br>最后采用的腾讯的一款压缩方案，解决了 UC 浏览器的问题。</p>
<p>d) 使用压缩插件时需注意，PNG 图片压缩时往往会偏大，可把压缩成 image/jpeg 格式；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cvs = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = cvs.getContext(<span class="string">"2d"</span>).drawImage(source_img_obj, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> newImageData = cvs.toDataURL(<span class="string">"image/jpeg"</span>, quality / <span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<p>f) 因浏览器对 input[type=file]显示风格各异，项目使用 label 的 for 指向 input[type=file]的 id，并设置 input{display:none};在 Adroid 部分浏览器上点击无反应；<br><strong>解决方式：</strong><br>设置 input{position: absolute; top: -999em;} 来隐藏。</p>
<blockquote>
<span style="color: #ff0000;"><em>#20150923 update start</em></span>
<strong>使用label标签for属性触发input[type=file]需要注意的一些问题：</strong>

<ol>
<li>label 的 for 指向的是 input[text/radio/checkbox/date]等元素 trigger 的是 focus 事件，而指向 input[file]元素 trigger 的是 click 事件，因此可以打开一个浏览器窗口，这就是我们使用 label 的 for 指向 input[file],使用 zepto 的 tap 事件绑定时，不会触发的原因。</li>
<li>给 input[type=file]设置 display: none or visibility: hidden 将不会工作，因为表单提交时 input 的值不会被发送到服务端。除上面解决的 top:-999em;也可以使用以下 CSS 来设置隐藏：<pre class="brush:css">input[type=file] {
    width: 0.1px;
    height: 0.1px;
    opacity: 0;
    overflow: hidden;
    position: absolute;
    z-index: -1;
}</pre>
你可能会有疑问，这里为什么不把宽高设置为 0 而为 0.1px。设置为 0 在一些浏览器 tab 页可能不会被解析。同时设置 position：absolute 属性来使其脱离标准流，不会影响其他元素的布局。</li>
</ol>
<p>如是想，使用 label 标签的 for 属性，我们就可以使用 CSS3 各种属性来 DIY 按钮各种样式及效果了，不是吗？</p>
<p>同时可以设置当 input[file]focus 时，label 的 outline 样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.input</span><span class="selector-attr">[type=file]</span><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">1px</span> dotted <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">outline</span>: -webkit-focus-ring-color auto <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Firefox 中对:hover,:active 支持良好，当时会忽略 input[type=”file”]:focus 设置，但是 Firefox 对 input[file]支持 focus、blur 事件，我们可以通过 JS 来增加和删除类 has-focus 来实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">input.addEventListener( <span class="string">'focus'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; input.classList.add( <span class="string">'has-focus'</span> ); &#125;);</span><br><span class="line">input.addEventListener( <span class="string">'blur'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; input.classList.remove( <span class="string">'has-focus'</span> ); &#125;);</span><br><span class="line">.inputfile:focus + label,</span><br><span class="line">.inputfile.has-focus + label &#123;</span><br><span class="line">    outline: 1px dotted #000;</span><br><span class="line">    outline: -webkit-focus-ring-color auto <span class="number">5</span>px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>input[file]多选（multiple），现在多选在移动端和PC端支持都不太好，PC端IE9及以下浏览器不支持该属性；移动端andriod系统某些自带浏览器、UC浏览器支持情况各异。<br><span style="color: #ff0000;"><em>#20150923 update end</em></span></blockquote><br>g) 在部分Adroid支持input[type=file]的浏览器中，当使用/image/.test(file.type)时，选择图片文件会返回false。使用JSON.stringify(file)分析后发现，是file对象中的name字段中没有包含后缀，同时type字段为空，使用this.value获取路径中也没有包含后缀。因此过滤出现问题。<br>如下结果：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"webkitRelativePath"</span>:<span class="string">""</span>,<span class="string">"lastModified"</span>:<span class="number">1433304214000</span>,<span class="string">"lastModifiedDate"</span>:<span class="string">"2015-06-03T04:03:34.000Z"</span>,</span><br><span class="line"><span class="string">"name"</span>:<span class="string">"fanmian"</span>,<span class="string">"type"</span>:<span class="string">""</span>,<span class="string">"size"</span>:<span class="number">2273852</span>&#125;</span><br></pre></td></tr></table></figure>
正常结果如下：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"webkitRelativePath"</span>:<span class="string">""</span>,<span class="string">"lastModified"</span>:<span class="number">1433304214000</span>,<span class="string">"lastModifiedDate"</span>:<span class="string">"2015-06-03T04:03:34.000Z"</span>,</span><br><span class="line"><span class="string">"name"</span>:<span class="string">"fanmian.png"</span>,<span class="string">"type"</span>:<span class="string">"image/png"</span>,<span class="string">"size"</span>:<span class="number">2273852</span>&#125;</span><br></pre></td></tr></table></figure>
<strong> 解决方式：</strong>放开/image/.test(file.type)过滤，在压缩时，抛出错误过滤。</li>
</ol>
<p>h) html5上传文件，Firefox支持重复选择同一文件，其它浏览器不支持<br><strong>解决方式：</strong>每次选择文件后给input[type=file]赋值空。</p>
<blockquote><span style="color: #ff0000;"><em>2015-09-09补充</em></span>
input[type=file]控件比较特殊：
对于ios，已实现file，ios7版本之前，可以唤起照片集里的图片文件；ios7后，实现了拍照和录像的功能。不过在7.0.3里有bug，程序会闪退；

<p>对于andriod，如果使用的是浏览器，file类型的文件选择，会唤起浏览器实现的文件选择，不过文件的选择，不同的手机，具体实现不同，web无法控制。如果在android app里使用webkit的方式，需要android的webkit实现私有api接口，才能实现file选择上传。</blockquote></p>
<h2 id="五、移动端-input-type-file-浏览器兼容列表"><a href="#五、移动端-input-type-file-浏览器兼容列表" class="headerlink" title="五、移动端 input[type=file]浏览器兼容列表"></a>五、移动端 input[type=file]浏览器兼容列表</h2><blockquote>
<p>input[type=file]控件在M端浏览器支持情况(部分机型)  by qianqian and xiaocui of my team updated at 2015.12.12</p>
</blockquote>
<table width="564">
<tbody>
<tr>
<td width="43"><strong>编号</strong></td>
<td width="111"><strong>手机设备</strong></td>
<td width="133"><strong>测试浏览器</strong></td>
<td width="123"><strong>是否支持拍照</strong></td>
<td width="155"><strong>是否支持从相册选择</strong></td>
</tr>
<tr>
<td rowspan="4" width="43">1</td>
<td rowspan="4" width="111">iphone4S</td>
<td width="133">微信浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">2</td>
<td rowspan="4" width="111">iphone5S</td>
<td width="133">微信浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">3</td>
<td rowspan="4" width="111">iphone6</td>
<td width="133">微信浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">4</td>
<td rowspan="4" width="111">iphone6 plus</td>
<td width="133">微信浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">5</td>
<td rowspan="4" width="111">小米手机2S</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">6</td>
<td rowspan="4" width="111">小米手机M4</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">7</td>
<td rowspan="4" width="111">三星S6 ED</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">8</td>
<td rowspan="4" width="111">三星SM-G5308W</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155"><span style="color: #ff0000;">不支持</span></td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">9</td>
<td rowspan="4" width="111">华为荣耀7</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">10</td>
<td rowspan="4" width="111">华为P7</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">11</td>
<td rowspan="4" width="111">华为PE-TL10</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td rowspan="4" width="43">12</td>
<td rowspan="4" width="111">酷派8675-A</td>
<td width="133">微信浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">QQ浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">UC浏览器</td>
<td width="123">支持</td>
<td width="155">支持</td>
</tr>
<tr>
<td width="133">手机自带浏览器</td>
<td width="123"><span style="color: #ff0000;">不支持</span></td>
<td width="155"><span style="color: #ff0000;">不支持</span></td>
</tr>
</tbody>
</table>

<h2 id="六、参考链接："><a href="#六、参考链接：" class="headerlink" title="六、参考链接："></a>六、参考链接：</h2><p><a href="http://www.matlus.com/html5-file-upload-with-progress/" target="_blank" rel="noopener">Html5 File Upload with Progress</a><br><a href="https://github.com/xiangpaopao/blog/issues/7" target="_blank" rel="noopener">移动端Web上传图片实践</a><br><a href="https://github.com/brunobar79/J-I-C/blob/master/src/JIC.js" target="_blank" rel="noopener">图片压缩成base64,采用二进流上传</a><br><a href="http://tympanus.net/codrops/2015/09/15/styling-customizing-file-inputs-smart-way" target="_blank" rel="noopener">Styling &amp; Customizing File Inputs the Smart Way</a></p>

            


            <h3>转载申请</h3>
            <p>本作品采用<a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">知识共享署名 4.0 国际许可协议</a>进行许可，转载时请注明原文链接，文章内图片请保留全部内容。</p>
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/web/" rel="tag">web</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/canvas_realizes_electronic_signature.html"
                    data-tooltip="Canvas实现电子签名"
                    aria-label="上一篇: Canvas实现电子签名"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/mainstream-animation-implementation.html"
                    data-tooltip="主流动画实现方式总结"
                    aria-label="下一篇: 主流动画实现方式总结"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://zuojj.com/post/talking_about_file_upload.html"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://zuojj.com/post/talking_about_file_upload.html"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://zuojj.com/post/talking_about_file_upload.html"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuojj.com/post/talking_about_file_upload.html&amp;title=文件上传那些事儿"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitalk"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="gitalk"></div>

            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 煦涵. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/canvas_realizes_electronic_signature.html"
                    data-tooltip="Canvas实现电子签名"
                    aria-label="上一篇: Canvas实现电子签名"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/mainstream-animation-implementation.html"
                    data-tooltip="主流动画实现方式总结"
                    aria-label="下一篇: 主流动画实现方式总结"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://zuojj.com/post/talking_about_file_upload.html"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://zuojj.com/post/talking_about_file_upload.html"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://zuojj.com/post/talking_about_file_upload.html"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuojj.com/post/talking_about_file_upload.html&amp;title=文件上传那些事儿"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitalk"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://zuojj.com/post/talking_about_file_upload.html"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://zuojj.com/post/talking_about_file_upload.html"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://zuojj.com/post/talking_about_file_upload.html"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuojj.com/post/talking_about_file_upload.html&amp;title=文件上传那些事儿"
                        aria-label="分享到 QQ"
                    >
                        <i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片" onerror="this.style.display='none'"/>
        
            <h4 id="about-card-name">煦涵</h4>
        
            <div id="about-card-bio"><p>因为热爱，所以坚持。</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Beijing
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover01.jpeg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-eckqyjnbtauschcduq0oxkzfhfqszk4a0rhwfpkvmaomrr1sy6lkgayitmwn.min.js"></script>

<!--SCRIPTS END-->


    
        
<script src="/assets/js/gitalk.js"></script>

        <script type="text/javascript">
          (function() {
            new Gitalk({
              clientID: 'c7c1ad823b46b771570d',
              clientSecret: '46d251bb9ed9d97efcf23a00db098bf7f7400a31',
              repo: 'zuojj.github.io',
              owner: 'zuojj',
              admin: ['zuojj'],
              id: 'post/talking_about_file_upload.html',
              ...{"language":"en","perPage":10,"distractionFreeMode":false,"enableHotKey":true,"pagerDirection":"first"}
            }).render('gitalk')
          })()
        </script>
    




    </body>
</html>
