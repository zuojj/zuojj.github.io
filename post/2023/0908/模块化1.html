
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="煦涵驛">
    <title>2023/0908/模块化1 - 煦涵驛</title>
    <meta name="author" content="煦涵">
    
        <meta name="keywords" content="WEB开发,前端开发,用户体验">
    
    
        <link rel="icon" href="https://zuojj.com/assets/images/favicon.ico">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"煦涵","sameAs":["https://github.com/zuojj","mailto:zuojj.com@gmail.com"],"image":"android-icon-192x192.png"},"articleBody":"前言在上古时期，曾经的 Web 开发者们，应该会因为在一个庞大的 JavaScript 文件中寻找一个小小的函数而感到绝望？或者因为修改一个变量而不得不查找整个代码库？\n当下的前端开发中，webpack，rollup，vite 等构建打包工具大家应该都用的飞起了。它们都基于一个非常重要的概念 - 前端模块化。\n在这篇文章中，我们将聊聊前端模块化的发展历程以及主流的一些方案。\n什么是模块化前端模块化是指将一个大型的前端应用程序分解为小的、独立的模块，每个模块都有自己的功能和接口，可以被其他模块使用。前端模块化的出现是为了解决前端开发中代码复杂度和可维护性的问题。在前端模块化的架构下，开发人员可以更加专注于各自的模块开发，提高了代码的复用性和可维护性。\n为什么需要前端模块化在传统的前端开发中，所有的代码都是写在同一个文件中，这样做的问题在于：\n可维护性差：当应用程序变得越来越大时，代码变得越来越难以维护。可重用性差：相同的代码可能会被多次复制和粘贴到不同的文件中，这样会导致代码冗余，增加了代码量。可测试性差：在传统的前端开发中，很难对代码进行单元测试。可扩展性差：在传统的前端开发中，很难对应用程序进行扩展。前端模块化的演进历程全局 function 模式将不同功能封装成不同的函数\nfunction fetchData() {    …}function handleData() {   …}缺陷：这个是将方法挂在 window 下，会污染全局命名空间，容易引起命名冲突且数据不安全等问题。\n全局 namespace 模式既然全局 function 模式下，会有命名冲突等问题，那么我们可以通过对象来封装模块\nvar myModule = { fetchData() {    …}, handleData() {   …}};缺陷：这个方案确实减少了全局变量，解决命名冲突的问题，但是外部可以直接修改模块内部的数据。\nIIFE 模式，通过自执行函数创建闭包function(global) {   var data = 1\n   function fetchData() {        …   }   function handleData() {       …   }   window.myModule = {fetchData, handleData}}(window)缺陷：这个方案下，数据是私有的，外部只能通过暴露的方法操作，但无法解决模块间相互依赖问题。\nIIFE 模式增强，传入自定义依赖我们可以通过传入依赖的方式来解决模块间引用的问题\nfunction(global, otherModule) {   var data = 1\n   function fetchData() {        …   }   function handleData() {       …   }   window.myModule = {fetchData, handleData, otherApi: otherModule.api}}(window, window.other_module)缺陷：但仍然有以下几个缺点\n多依赖传入时，代码阅读困难无法支持大规模模块化开发无特定语法支持，代码简陋经过以上过程的演进，我们确实可以实现前端模块化开发了，但是仍然有几个问题，一是请求过多，我们都是通过 script 标签来引入各个模块文件的，依赖多个模块，那样就会发送多个请求。二是依赖模糊，很容易因为不了解模块之间的依赖关系导致加载先后顺序出错，模块之间的依赖关系比较难以管理，也没有明确的接口和规范。因此模块化规范应运而生。\n模块化规范CommonJS\n\n概述CommonJS 是一个 JavaScript 模块化规范，它最初是为了解决 JavaScript 在服务器端的模块化问题而提出的。是 NodeJS 的默认模块饭规范，该规范定义了模块的基本结构、模块的加载方式以及模块的导出和导入方式等内容。\n\n模块的基本结构在 CommonJS 规范中，一个模块就是一个文件。每个文件都是一个独立的模块，文件内部定义的变量、函数和类等只在该文件内部有效。\n\n\n每个模块都有自己的作用域，模块内部的变量、函数和类等只在该模块内部有效。如果想在其他模块中使用该模块内部的变量、函数和类等，需要将其导出。\n\n模块的加载方式在 CommonJS 规范中，模块的加载方式是同步的。也就是说，当一个模块被引入时，会立即执行该模块内部的代码，并将该模块导出的内容返回给引入该模块的代码。\n\n模块可以多次加载，第一次加载时会运行模块，模块输出结果会被缓存，再次加载时，会从缓存结果中直接读取模块输出结果。模块加载的顺序，按照其在代码中出现的顺序。模块输出的值是值的拷贝，类似 IIFE 方案中的内部变量。\n这种同步加载方式可以保证模块内部的代码执行完毕后再执行外部代码，从而避免了异步加载所带来的一些问题。但同时也会影响页面加载速度，因此在浏览器端使用时需要注意。\n\n模块的导出和导入方式在 CommonJS 规范中，一个模块可以通过module.exports 或者 exports 对象来导出内容。module.exports 是真正的导出对象，而 exports 对象只是对 module.exports 的一个引用。\n\n一个模块可以导出多个内容，可以通过 module.exports 或者 exports 对象分别导出。例如：\n// 导出一个变量module.exports.name = ‘Tom’;\n// 导出一个函数exports.sayHello = function() {  console.log(‘Hello!’);};在另一个模块中，可以通过 require 函数来引入其他模块，并访问其导出的内容。例如：\n// 引入其他模块var moduleA = require(‘./moduleA’);\n// 访问其他模块导出的变量console.log(moduleA.name);\n// 访问其他模块导出的函数moduleA.sayHello();5. 特点CommonJS 模块由 JS 运行时实现。CommonJS 模块输出的是值的拷贝，本质上导出的就是 exports 属性。CommonJS 是可以动态加载的，对每一个加载都存在缓存，可以有效的解决循环引用问题。CommonJS 模块同步加载并执行模块文件。ES6 模块化\n\n概述在 ES6 之前，JavaScript 并没有原生支持模块化，因此开发者们需要使用一些第三方库或者自己实现一些模块化方案来解决代码复用和管理问题。但是这些方案都有一些问题，比如命名冲突、依赖管理等。ES6 引入了 ESModule 模块化规范来解决这些问题。\n\nESModule 模块化规范是一种静态的模块化方案，它允许开发者将代码分割成小的、独立的模块，每个模块都有自己的作用域。ESModule 规范是基于文件的，每个文件都是一个独立的模块。\nESModule 的模块解析规则是基于 URL 解析规则的。当我们使用 import 语句导入一个模块时，模块加载器会根据 import 语句中指定的路径解析出对应的 URL，并将其作为唯一标识符来加载对应的模块文件。在浏览器中，URL 解析规则是基于当前页面的 URL 进行解析；在 Node.js 中，URL 解析规则是基于当前运行脚本的路径进行解析。\n\n模块的加载方式ESModule 规范是基于文件的，每个文件都是一个独立的模块。在浏览器中，可以使用标签来加载 ESModule 模块。在 Node.js 中，可以使用 import 关键字来加载 ESModule 模块。\n\n\n\n// 在Node.js中加载ESModule模块import { name } from './module';3. 模块的导出和导入方式在 ESModule 中，使用 export 关键字将变量或者函数导出，使用 import 关键字导入其他模块中导出的变量或者函数。导出和导入方式有以下几种：\n命名导出和命名导入命名导出和命名导入是最常见的一种方式。可以将多个变量或者函数命名导出，也可以将多个变量或者函数命名导入。\n// module.jsexport const name = '张三';export function sayHello() {  console.log('Hello');}\n// app.jsimport { name, sayHello } from './module';默认导出和默认导入默认导出和默认导入是一种简单的方式，可以将一个变量或者函数作为默认导出，也可以将一个变量或者函数作为默认导入。\n// module.jsexport default 'Hello World';\n// app.jsimport message from './module';混合命名和默认导出混合命名和默认导出也是一种常见的方式，可以将多个变量或者函数命名导出，同时将一个变量或者函数作为默认导出。\n// module.jsexport const name = '张三';export function sayHello() {  console.log('Hello');}export default 'Hello World';\n// app.jsimport message, { name, sayHello } from './module';4. 特点：ES6 Module 静态的，不能放在块级作用域内，代码发生在编译时。ES6 模块输出的是值的引用，如果一个模块修改了另一个模块导出的值，那么这个修改会影响到原始模块。ES6 Module 可以导出多个属性和方法，可以单个导入导出，混合导入导出。ES6 模块提前加载并执行模块文件，AMD\n\n概述AMD 是 Asynchronous Module Definition 的缩写，即异步模块定义。它是由 RequireJS 的作者 James Burke 提出的一种模块化规范。AMD 规范的主要特点是：异步加载、提前执行。\n\n基本语法在 AMD 规范中，一个模块通常由以下几个部分组成：\n\n\ndefine(id?, dependencies?, factory);其中：\nid：可选参数，表示模块标识符，一般为字符串类型。dependencies：可选参数，表示当前模块所依赖的其他模块。它是一个数组类型，每个元素表示一个依赖模块的标识符。factory：必需参数，表示当前模块的工厂函数。它是一个函数类型，用于定义当前模块的行为。一个典型的 AMD 模块定义如下所示：\ndefine('module1', ['module2', 'module3'], function(module2, module3) {  // 模块1的代码逻辑  return {    // 暴露给外部的接口  };});AMD 规范采用异步加载方式，它通过require函数来加载一个或多个模块。require函数接受一个数组类型的参数，每个元素表示一个待加载的模块标识符。当所有依赖模块加载完成后，require函数才会执行回调函数。\nrequire(['module1', 'module2'], function(module1, module2) {  // 所有依赖模块加载完成后执行的回调函数});AMD 模式可以用于浏览器环境，并且允许非同步加载模块，也可以根据需要动态加载模块。\nCMD\n\n概述CMD 是 Common Module Definition 的缩写，即通用模块定义。CMD 规范的主要特点是：按需加载、延迟执行。\n\n基本语法//定义没有依赖的模块define(function(require, exports, module){exports.xxx = valuemodule.exports = value})//定义有依赖的模块define(function(require, exports, module){ //引入依赖模块(同步) var module2 = require('./module2') //引入依赖模块(异步) require.async('./module3', function (m3) {}) //暴露模块 exports.xxx = value})\n// 引入该模块define(function (require) {var m1 = require('./module1')var m4 = require('./module4')m1.show()m4.show()})CMD 规范专门用于浏览器端，模块的加载是异步的，模块使用时才会加载执行。CMD 规范整合了 CommonJS 和 AMD 规范的特点。\n\n\n","dateCreated":"2023-09-08T10:27:29+08:00","dateModified":"2023-09-08T10:27:29+08:00","datePublished":"2023-09-08T10:27:29+08:00","description":"","headline":"2023/0908/模块化1","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"},"publisher":{"@type":"Organization","name":"煦涵","sameAs":["https://github.com/zuojj","mailto:zuojj.com@gmail.com"],"image":"android-icon-192x192.png","logo":{"@type":"ImageObject","url":"android-icon-192x192.png"}},"url":"https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"}</script>
    <meta name="description" content="前言在上古时期，曾经的 Web 开发者们，应该会因为在一个庞大的 JavaScript 文件中寻找一个小小的函数而感到绝望？或者因为修改一个变量而不得不查找整个代码库？ 当下的前端开发中，webpack，rollup，vite 等构建打包工具大家应该都用的飞起了。它们都基于一个非常重要的概念 - 前端模块化。 在这篇文章中，我们将聊聊前端模块化的发展历程以及主流的一些方案。 什么是模块化前端模块化">
<meta property="og:type" content="blog">
<meta property="og:title" content="2023&#x2F;0908&#x2F;模块化1">
<meta property="og:url" content="https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html">
<meta property="og:site_name" content="煦涵驛">
<meta property="og:description" content="前言在上古时期，曾经的 Web 开发者们，应该会因为在一个庞大的 JavaScript 文件中寻找一个小小的函数而感到绝望？或者因为修改一个变量而不得不查找整个代码库？ 当下的前端开发中，webpack，rollup，vite 等构建打包工具大家应该都用的飞起了。它们都基于一个非常重要的概念 - 前端模块化。 在这篇文章中，我们将聊聊前端模块化的发展历程以及主流的一些方案。 什么是模块化前端模块化">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-09-08T02:27:29.198Z">
<meta property="article:modified_time" content="2023-09-08T02:27:29.202Z">
<meta property="article:author" content="煦涵">
<meta property="article:tag" content="WEB开发">
<meta property="article:tag" content="前端开发">
<meta property="article:tag" content="用户体验">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;zuojj">
    
    
        
    
    
        <meta property="og:image" content="https://zuojj.com/assets/images/android-icon-192x192.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-s3qttgqrtgd57gnemxc89qfxwz8jaeotbs4numpbnmrx9z1rsgnwsd3dkbua.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159301267-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-159301267-1');
    </script>


    

    
        
            
<link rel="stylesheet" href="/assets/css/gitalk.css">

        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            煦涵驛
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片" onerror="this.style.display='none'"/>
                </a>
                <h4 class="sidebar-profile-name">煦涵</h4>
                
                    <h5 class="sidebar-profile-bio"><p>因为热爱，所以坚持。</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/zuojj"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:zuojj.com@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="邮箱"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            2023/0908/模块化1
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2023-09-08T10:27:29+08:00">
	
		    9月 08, 2023
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>前言<br>在上古时期，曾经的 Web 开发者们，应该会因为在一个庞大的 JavaScript 文件中寻找一个小小的函数而感到绝望？或者因为修改一个变量而不得不查找整个代码库？</p>
<p>当下的前端开发中，webpack，rollup，vite 等构建打包工具大家应该都用的飞起了。它们都基于一个非常重要的概念 - 前端模块化。</p>
<p>在这篇文章中，我们将聊聊前端模块化的发展历程以及主流的一些方案。</p>
<p>什么是模块化<br>前端模块化是指将一个大型的前端应用程序分解为小的、独立的模块，每个模块都有自己的功能和接口，可以被其他模块使用。前端模块化的出现是为了解决前端开发中代码复杂度和可维护性的问题。在前端模块化的架构下，开发人员可以更加专注于各自的模块开发，提高了代码的复用性和可维护性。</p>
<p>为什么需要前端模块化<br>在传统的前端开发中，所有的代码都是写在同一个文件中，这样做的问题在于：</p>
<p>可维护性差：当应用程序变得越来越大时，代码变得越来越难以维护。<br>可重用性差：相同的代码可能会被多次复制和粘贴到不同的文件中，这样会导致代码冗余，增加了代码量。<br>可测试性差：在传统的前端开发中，很难对代码进行单元测试。<br>可扩展性差：在传统的前端开发中，很难对应用程序进行扩展。<br>前端模块化的演进历程<br>全局 function 模式<br>将不同功能封装成不同的函数</p>
<p>function fetchData() {<br>    …<br>}<br>function handleData() {<br>   …<br>}<br>缺陷：这个是将方法挂在 window 下，会污染全局命名空间，容易引起命名冲突且数据不安全等问题。</p>
<p>全局 namespace 模式<br>既然全局 function 模式下，会有命名冲突等问题，那么我们可以通过对象来封装模块</p>
<p>var myModule = {<br> fetchData() {<br>    …<br>},<br> handleData() {<br>   …<br>}<br>};<br>缺陷：这个方案确实减少了全局变量，解决命名冲突的问题，但是外部可以直接修改模块内部的数据。</p>
<p>IIFE 模式，通过自执行函数创建闭包<br>function(global) {<br>   var data = 1</p>
<p>   function fetchData() {<br>        …<br>   }<br>   function handleData() {<br>       …<br>   }<br>   window.myModule = {fetchData, handleData}<br>}(window)<br>缺陷：这个方案下，数据是私有的，外部只能通过暴露的方法操作，但无法解决模块间相互依赖问题。</p>
<p>IIFE 模式增强，传入自定义依赖<br>我们可以通过传入依赖的方式来解决模块间引用的问题</p>
<p>function(global, otherModule) {<br>   var data = 1</p>
<p>   function fetchData() {<br>        …<br>   }<br>   function handleData() {<br>       …<br>   }<br>   window.myModule = {fetchData, handleData, otherApi: otherModule.api}<br>}(window, window.other_module)<br>缺陷：但仍然有以下几个缺点</p>
<p>多依赖传入时，代码阅读困难<br>无法支持大规模模块化开发<br>无特定语法支持，代码简陋<br>经过以上过程的演进，我们确实可以实现前端模块化开发了，但是仍然有几个问题，一是请求过多，我们都是通过 script 标签来引入各个模块文件的，依赖多个模块，那样就会发送多个请求。二是依赖模糊，很容易因为不了解模块之间的依赖关系导致加载先后顺序出错，模块之间的依赖关系比较难以管理，也没有明确的接口和规范。因此模块化规范应运而生。</p>
<p>模块化规范<br>CommonJS</p>
<ol>
<li><p>概述<br>CommonJS 是一个 JavaScript 模块化规范，它最初是为了解决 JavaScript 在服务器端的模块化问题而提出的。是 NodeJS 的默认模块饭规范，该规范定义了模块的基本结构、模块的加载方式以及模块的导出和导入方式等内容。</p>
</li>
<li><p>模块的基本结构<br>在 CommonJS 规范中，一个模块就是一个文件。每个文件都是一个独立的模块，文件内部定义的变量、函数和类等只在该文件内部有效。</p>
</li>
</ol>
<p>每个模块都有自己的作用域，模块内部的变量、函数和类等只在该模块内部有效。如果想在其他模块中使用该模块内部的变量、函数和类等，需要将其导出。</p>
<ol start="3">
<li>模块的加载方式<br>在 CommonJS 规范中，模块的加载方式是同步的。也就是说，当一个模块被引入时，会立即执行该模块内部的代码，并将该模块导出的内容返回给引入该模块的代码。</li>
</ol>
<p>模块可以多次加载，第一次加载时会运行模块，模块输出结果会被缓存，再次加载时，会从缓存结果中直接读取模块输出结果。模块加载的顺序，按照其在代码中出现的顺序。模块输出的值是值的拷贝，类似 IIFE 方案中的内部变量。</p>
<p>这种同步加载方式可以保证模块内部的代码执行完毕后再执行外部代码，从而避免了异步加载所带来的一些问题。但同时也会影响页面加载速度，因此在浏览器端使用时需要注意。</p>
<ol start="4">
<li>模块的导出和导入方式<br>在 CommonJS 规范中，一个模块可以通过module.exports 或者 exports 对象来导出内容。module.exports 是真正的导出对象，而 exports 对象只是对 module.exports 的一个引用。</li>
</ol>
<p>一个模块可以导出多个内容，可以通过 module.exports 或者 exports 对象分别导出。例如：</p>
<p>// 导出一个变量<br>module.exports.name = ‘Tom’;</p>
<p>// 导出一个函数<br>exports.sayHello = function() {<br>  console.log(‘Hello!’);<br>};<br>在另一个模块中，可以通过 require 函数来引入其他模块，并访问其导出的内容。例如：</p>
<p>// 引入其他模块<br>var moduleA = require(‘./moduleA’);</p>
<p>// 访问其他模块导出的变量<br>console.log(moduleA.name);</p>
<p>// 访问其他模块导出的函数<br>moduleA.sayHello();<br>5. 特点<br>CommonJS 模块由 JS 运行时实现。<br>CommonJS 模块输出的是值的拷贝，本质上导出的就是 exports 属性。<br>CommonJS 是可以动态加载的，对每一个加载都存在缓存，可以有效的解决循环引用问题。<br>CommonJS 模块同步加载并执行模块文件。<br>ES6 模块化</p>
<ol>
<li>概述<br>在 ES6 之前，JavaScript 并没有原生支持模块化，因此开发者们需要使用一些第三方库或者自己实现一些模块化方案来解决代码复用和管理问题。但是这些方案都有一些问题，比如命名冲突、依赖管理等。ES6 引入了 ESModule 模块化规范来解决这些问题。</li>
</ol>
<p>ESModule 模块化规范是一种静态的模块化方案，它允许开发者将代码分割成小的、独立的模块，每个模块都有自己的作用域。ESModule 规范是基于文件的，每个文件都是一个独立的模块。</p>
<p>ESModule 的模块解析规则是基于 URL 解析规则的。当我们使用 import 语句导入一个模块时，模块加载器会根据 import 语句中指定的路径解析出对应的 URL，并将其作为唯一标识符来加载对应的模块文件。在浏览器中，URL 解析规则是基于当前页面的 URL 进行解析；在 Node.js 中，URL 解析规则是基于当前运行脚本的路径进行解析。</p>
<ol start="2">
<li>模块的加载方式<br>ESModule 规范是基于文件的，每个文件都是一个独立的模块。在浏览器中，可以使用<script type="module">标签来加载 ESModule 模块。在 Node.js 中，可以使用 import 关键字来加载 ESModule 模块。</li>
</ol>
<!-- 在浏览器中加载ESModule模块 -->
<script type="module" src="./module.js"></script>
<p>// 在Node.js中加载ESModule模块<br>import { name } from './module';<br>3. 模块的导出和导入方式<br>在 ESModule 中，使用 export 关键字将变量或者函数导出，使用 import 关键字导入其他模块中导出的变量或者函数。导出和导入方式有以下几种：</p>
<p>命名导出和命名导入<br>命名导出和命名导入是最常见的一种方式。可以将多个变量或者函数命名导出，也可以将多个变量或者函数命名导入。</p>
<p>// module.js<br>export const name = '张三';<br>export function sayHello() {<br>  console.log('Hello');<br>}</p>
<p>// app.js<br>import { name, sayHello } from './module';<br>默认导出和默认导入<br>默认导出和默认导入是一种简单的方式，可以将一个变量或者函数作为默认导出，也可以将一个变量或者函数作为默认导入。</p>
<p>// module.js<br>export default 'Hello World';</p>
<p>// app.js<br>import message from './module';<br>混合命名和默认导出<br>混合命名和默认导出也是一种常见的方式，可以将多个变量或者函数命名导出，同时将一个变量或者函数作为默认导出。</p>
<p>// module.js<br>export const name = '张三';<br>export function sayHello() {<br>  console.log('Hello');<br>}<br>export default 'Hello World';</p>
<p>// app.js<br>import message, { name, sayHello } from './module';<br>4. 特点：<br>ES6 Module 静态的，不能放在块级作用域内，代码发生在编译时。<br>ES6 模块输出的是值的引用，如果一个模块修改了另一个模块导出的值，那么这个修改会影响到原始模块。<br>ES6 Module 可以导出多个属性和方法，可以单个导入导出，混合导入导出。<br>ES6 模块提前加载并执行模块文件，<br>AMD</p>
<ol>
<li><p>概述<br>AMD 是 Asynchronous Module Definition 的缩写，即异步模块定义。它是由 RequireJS 的作者 James Burke 提出的一种模块化规范。AMD 规范的主要特点是：异步加载、提前执行。</p>
</li>
<li><p>基本语法<br>在 AMD 规范中，一个模块通常由以下几个部分组成：</p>
</li>
</ol>
<p>define(id?, dependencies?, factory);<br>其中：</p>
<p>id：可选参数，表示模块标识符，一般为字符串类型。<br>dependencies：可选参数，表示当前模块所依赖的其他模块。它是一个数组类型，每个元素表示一个依赖模块的标识符。<br>factory：必需参数，表示当前模块的工厂函数。它是一个函数类型，用于定义当前模块的行为。<br>一个典型的 AMD 模块定义如下所示：</p>
<p>define('module1', ['module2', 'module3'], function(module2, module3) {<br>  // 模块1的代码逻辑<br>  return {<br>    // 暴露给外部的接口<br>  };<br>});<br>AMD 规范采用异步加载方式，它通过require函数来加载一个或多个模块。require函数接受一个数组类型的参数，每个元素表示一个待加载的模块标识符。当所有依赖模块加载完成后，require函数才会执行回调函数。</p>
<p>require(['module1', 'module2'], function(module1, module2) {<br>  // 所有依赖模块加载完成后执行的回调函数<br>});<br>AMD 模式可以用于浏览器环境，并且允许非同步加载模块，也可以根据需要动态加载模块。</p>
<p>CMD</p>
<ol>
<li><p>概述<br>CMD 是 Common Module Definition 的缩写，即通用模块定义。CMD 规范的主要特点是：按需加载、延迟执行。</p>
</li>
<li><p>基本语法<br>//定义没有依赖的模块<br>define(function(require, exports, module){<br>exports.xxx = value<br>module.exports = value<br>})<br>//定义有依赖的模块<br>define(function(require, exports, module){<br> //引入依赖模块(同步)<br> var module2 = require('./module2')<br> //引入依赖模块(异步)<br> require.async('./module3', function (m3) {<br>})<br> //暴露模块<br> exports.xxx = value<br>})</p>
<p>// 引入该模块<br>define(function (require) {<br>var m1 = require('./module1')<br>var m4 = require('./module4')<br>m1.show()<br>m4.show()<br>})<br>CMD 规范专门用于浏览器端，模块的加载是异步的，模块使用时才会加载执行。CMD 规范整合了 CommonJS 和 AMD 规范的特点。</p>
</li>
</ol>

            


            <h3>转载申请</h3>
            <p>本作品采用<a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">知识共享署名 4.0 国际许可协议</a>进行许可，转载时请注明原文链接，文章内图片请保留全部内容。</p>
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2023/0907/CSS%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9A%E5%8E%9F%E7%94%9FCSS%E5%B5%8C%E5%A5%97.html"
                    data-tooltip="2023/0907/CSS新特性：原生CSS嵌套"
                    aria-label="上一篇: 2023/0907/CSS新特性：原生CSS嵌套"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2023/0904/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%9A%84VSCode%E6%8F%92%E4%BB%B6%E9%9B%86%E9%94%A6.html"
                    data-tooltip="2023/0904/研效提升：前端开发常用的VSCode插件集锦"
                    aria-label="下一篇: 2023/0904/研效提升：前端开发常用的VSCode插件集锦"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html&amp;title=2023/0908/模块化1"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitalk"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="gitalk"></div>

            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 煦涵. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2023/0907/CSS%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%9A%E5%8E%9F%E7%94%9FCSS%E5%B5%8C%E5%A5%97.html"
                    data-tooltip="2023/0907/CSS新特性：原生CSS嵌套"
                    aria-label="上一篇: 2023/0907/CSS新特性：原生CSS嵌套"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2023/0904/%E7%A0%94%E6%95%88%E6%8F%90%E5%8D%87%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%9A%84VSCode%E6%8F%92%E4%BB%B6%E9%9B%86%E9%94%A6.html"
                    data-tooltip="2023/0904/研效提升：前端开发常用的VSCode插件集锦"
                    aria-label="下一篇: 2023/0904/研效提升：前端开发常用的VSCode插件集锦"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html&amp;title=2023/0908/模块化1"
                    title="分享到 QQ"
                    aria-label="分享到 QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitalk"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://connect.qq.com/widget/shareqq/index.html?url=https://zuojj.com/post/2023/0908/%E6%A8%A1%E5%9D%97%E5%8C%961.html&amp;title=2023/0908/模块化1"
                        aria-label="分享到 QQ"
                    >
                        <i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/android-icon-192x192.png" alt="作者的图片" onerror="this.style.display='none'"/>
        
            <h4 id="about-card-name">煦涵</h4>
        
            <div id="about-card-bio"><p>因为热爱，所以坚持。</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Beijing
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover01.jpeg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-l4ckxdv6tbjuxqwojpoduttbowmwffe9xttrtxbjaohwrzhqzj3ocb4fmrwh.min.js"></script>

<!--SCRIPTS END-->


    
        
<script src="/assets/js/gitalk.js"></script>

        <script type="text/javascript">
          (function() {
            new Gitalk({
              clientID: 'c7c1ad823b46b771570d',
              clientSecret: '46d251bb9ed9d97efcf23a00db098bf7f7400a31',
              repo: 'zuojj.github.io',
              owner: 'zuojj',
              admin: ['zuojj'],
              id: 'post/2023/0908/模块化1.html',
              ...{"language":"en","perPage":10,"distractionFreeMode":false,"enableHotKey":true,"pagerDirection":"first"}
            }).render('gitalk')
          })()
        </script>
    




    </body>
</html>
